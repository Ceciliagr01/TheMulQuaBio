
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biological Computing in R &#8212; TheMulQuaBio</title>
    
  <link rel="stylesheet" href="../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.bfb7730f9caf2ec0b46a44615585038c.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="11-Stats-Intro.html" />
    <link rel="prev" title="Biological Computing in Python II" href="06-Python_II.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">TheMulQuaBio</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to The Multilingual Quantitative Biologist!
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Computing
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="00-Intro.html">
   Introduction
   <span class="tocSkip">
   </span>
   <a name="chap:Intro">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01-Unix.html">
   UNIX and Linux
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-ShellScripting.html">
   Shell scripting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03-Git.html">
   Version control with Git
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-LaTeX.html">
   Scientific documents with
   <span class="math notranslate nohighlight">
    \(\LaTeX\)
   </span>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-Python_I.html">
   Biological Computing in Python I
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-Python_II.html">
   Biological Computing in Python II
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Biological Computing in R
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data Analyses and Statistics
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="11-Stats-Intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08-Data_R.html">
   Data management, Exploration and Visualization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12-ExpDesign.html">
   Experimental design and Data exploration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13-t_F_tests.html">
   <span class="math notranslate nohighlight">
    \(t\)
   </span>
   and
   <span class="math notranslate nohighlight">
    \(F\)
   </span>
   tests
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14-regress.html">
   Linear Models: Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15-anova.html">
   Linear Models: Analysis of variance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="16-MulExpl.html">
   Linear Models: Multiple explanatory variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="17-MulExplInter.html">
   Linear Models: Multiple variables with interactions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html#an-example">
   An example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html#a-maximal-model">
   A Maximal model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html#a-better-maximal-model">
   A better maximal model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html#model-simplification">
   Model simplification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-ModelSimp.html#exercise">
   Exercise
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="19-glm.html">
   Generalised Linear Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="20-ModelFitting.html">
   Model Fitting in Ecology and Evolution
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html">
   What is Jupyter?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#key-jupyter-features">
   Key Jupyter features
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#installing-jupyter">
   Installing Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#launching-running-a-jupyter-notebook">
   Launching/Running a Jupyter Notebook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#key-elements-of-the-jupyter-nb-content">
   Key elements of the Jupyter nb content
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#keyboard-shortcuts">
   Keyboard shortcuts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#running-code">
   Running code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#exiting-a-jupyter-notebook">
   Exiting a Jupyter Notebook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-JupyIntro.html#readings-and-resources">
   Readings and Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-Maths.html">
   Mathematical models in Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-Assessment.html">
   Coursework Assessment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-Data-Python.html">
   Data analyses  with Python &amp; Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-Databases.html">
   Databases
   <span class="tocSkip">
   </span>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Appendix-MiniProj.html">
   The Computing Miniproject
   <a name="Apx:Miniproj">
   </a>
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/07-R.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/mhasoba/TheMulQuaBio"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/mhasoba/TheMulQuaBio/issues/new?title=Issue%20on%20page%20%2Fnotebooks/07-R.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/mhasoba/TheMulQuaBio/master?urlpath=tree/notebooks/07-R.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/mhasoba/TheMulQuaBio/blob/master/notebooks/07-R.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-r">
     What is R?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-r">
     Why R?
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#would-you-ever-need-anything-other-than-r">
       Would you ever need anything other than R?
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-r">
   Installing R
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting started
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gooey-ides">
     Gooey IDEs!
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#r-basics">
   R basics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#useful-r-commands">
     Useful R commands
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#baby-steps">
     Baby steps
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variable-names-and-tabbing">
     Variable names and Tabbing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operators">
     Operators
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#when-things-go-wrong">
     When things go wrong
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#types-of-parentheses">
     Types of parentheses
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#variable-types">
   Variable types
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type-conversions-and-special-values">
     Type Conversions and Special Values
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#r-data-structures">
   R Data Structures
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vectors">
     Vectors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matrices-and-arrays">
     Matrices and arrays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-frames">
     Data frames
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lists">
     Lists
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#matrix-vs-dataframe">
     Matrix vs Dataframe
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-and-manipulating-data">
   Creating and manipulating data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-sequences">
     Creating sequences
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-parts-of-data-stuctures-indices-and-indexing">
     Accessing parts of data stuctures: Indices and Indexing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recycling">
     Recycling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-vector-matrix-operations">
     Basic vector-matrix operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#strings-and-pasting">
     Strings and Pasting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#useful-r-functions">
     Useful R functions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#for-manipulating-strings">
       For manipulating strings
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#mathematical">
       Mathematical
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#statistical">
       Statistical
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sets">
       Sets
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generating-random-numbers">
     Generating Random Numbers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#seeding-random-number-generators">
       “Seeding” random number generators
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#your-analysis-workflow">
   Your analysis workflow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-r-workspace-and-working-directory">
     The R Workspace and Working Directory
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-and-exporting-data">
   Importing and Exporting Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#relative-paths">
     Relative paths
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writing-to-and-saving-files">
     Writing to and saving files
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-r-code">
   Writing R code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-r-code">
   Running R code
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-source">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       source
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-rscript">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       Rscript
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-r-in-batch-mode">
     Running R in batch mode
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#control-flow-tools">
   Control flow tools
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-more-control-flow-tools">
     Some more control flow tools
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#breaking-out-of-loops">
       <code class="docutils literal notranslate">
        <span class="pre">
         break
        </span>
       </code>
       ing out of loops
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-next">
       Using
       <code class="docutils literal notranslate">
        <span class="pre">
         next
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-r-functions">
   Writing R Functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#practicals">
   Practicals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vectorization">
   Vectorization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pre-allocation">
     Pre-allocation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-apply-family-of-functions">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       *apply
      </span>
     </code>
     family of functions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-vectorization-example">
       A vectorization example
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-tapply-function">
       The
       <code class="docutils literal notranslate">
        <span class="pre">
         tapply
        </span>
       </code>
       function
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-by">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       by
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-replicate">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       replicate
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-plyr-and-ddply">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       plyr
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       ddply
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Practicals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#errors-and-debugging">
   Errors and Debugging
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#catching-errors">
     “Catching” errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#debugging">
     Debugging
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#packages">
   Packages
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-your-own">
     Building your own
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sweave-and-knitr">
   Sweave and knitr
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Practicals
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#practicals-wrap-up">
     Practicals wrap-up
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#readings-and-resources">
   Readings and Resources
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="biological-computing-in-r">
<h1>Biological Computing in R<a class="headerlink" href="#biological-computing-in-r" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>You will use R a lot during the rest of your courses, your thesis  dissertation, and very likely, your career. The R part of this course aims to lay down the foundations for you to use R for scientific computing in biology by exploiting it full potential as a fully featured object-oriented programming language. Specifically, this chapter aims at teaching you:</p>
<ul class="simple">
<li><p>Basic R syntax and programming conventions, assuming you have never set your eyes on R</p></li>
<li><p>Principles of data processing and exploration (including visualization) using R</p></li>
<li><p>Principles of clean and efficient programming using R</p></li>
<li><p>To generate publication quality graphics in R</p></li>
<li><p>To develop reproducible data analysis “work flows” so you (or anybody else) can run and re-run your analyses, graphics outputs and all, in R</p></li>
<li><p>To make R simulations more efficient using vectorization</p></li>
<li><p>To find and fix errors in R code using debugging</p></li>
<li><p>T make data wrangling and analyses more efficient and convenient using custom tools such as <code class="docutils literal notranslate"><span class="pre">tidyr</span></code></p></li>
<li><p>Some additional tools and topics in R (accessing databases, building your own packages, etc.).</p></li>
</ul>
<div class="section" id="what-is-r">
<h3>What is R?<a class="headerlink" href="#what-is-r" title="Permalink to this headline">¶</a></h3>
<p>R is a freely available statistical software with strong  programming capabilities widely used by professional scientists around  the world. It was based on the commercial statistical software <code class="docutils literal notranslate"><span class="pre">S</span></code> by Robert Gentleman and Ross Ihaka. The first stable version appeared  in 2000.</p>
<p>R was essentially designed for <em>programming</em> statistical  analysis and data-mining. It became the standard tool for data  analysis and visualization in biology in a matter of just 10 years or so. It is also increasingly being used for modelling in biology. This is because R has:</p>
<ul class="simple">
<li><p>Many tried and tested packages to perform practically all statistical analysis</p></li>
<li><p>Numerous packages for data-handling and processing</p></li>
<li><p>Excellent graphing and visualization capabilities</p></li>
<li><p>Good capabilities for mathematical calculations, including matrix algebra</p></li>
</ul>
</div>
<div class="section" id="why-r">
<h3>Why R?<a class="headerlink" href="#why-r" title="Permalink to this headline">¶</a></h3>
<p>There are many commercial statistical (minitab, SPSS, etc) software  packages in the world that are mouse-driven, warm, and friendly, and  have lots of statistical tests and plotting/graphing capabilities. Why not just use them? Here are some very good reasons:</p>
<ul class="simple">
<li><p>R is scriptable, so you can build a perfectly repeatable record of your analysis. This in itself has several advantages:</p>
<ul>
<li><p>You can never replicate <em>exactly</em> the same analysis with all the same steps using a point-and-click approach/software. With R you can reproduce your full analysis for yourself (in the future!), your colleagues, your supervisor/employer, and any journal you might want to submit your work to.</p></li>
<li><p>You may need to rerun your analysis every time you get new data. Once you have it all in a R script, you can just rerun your 	analysis and go home!</p></li>
<li><p>You may need to tweak your analysis many times (new data, supervisor changes mind, you change mind, paper reviewers want you do something differently). Having the analysis recorded as script then allows you to do so by revising the relevant parts of your analysis with relatively little pain.</p></li>
</ul>
</li>
<li><p>R provides basically every statistical test you’ll ever need and is constantly being improved –  you can tailor your analyses rather than trying to use the more limited options each statistical software package can offer.</p></li>
<li><p>R can produce publication-quality graphics that can be re-produced with scripts – you won’t get <a class="reference external" href="https://en.wikipedia.org/wiki/Repetitive_strain_injury">RSI</a> mouse-clicking your way though graphing and re-graphing your data every time you change your analysis!</p></li>
<li><p>R is freely available for all common computer operating systems – if you want a copy on your laptop, help yourself  at the <a class="reference external" href="https://cran.r-project.org">CRAN website</a>.</p></li>
<li><p>Being able to program in R means you can develop and automate your own data handling, statistical analysis, and graphing/plotting, a set of skills you are likely to need in many, if not most careers paths!</p></li>
</ul>
<div class="section" id="would-you-ever-need-anything-other-than-r">
<h4>Would you ever need anything other than R?<a class="headerlink" href="#would-you-ever-need-anything-other-than-r" title="Permalink to this headline">¶</a></h4>
<p>Being able to program R means you can develop and automate your statistical analyses and the generation of figures into a reproducible work flow. For many of you, using R as your only programming language will do the job. However, if your work also includes extensive numerical simulations, manipulation of very large matrices, bioinformatics, relational database access and manipulation, or web development, you will be better-off <em>also</em> knowing another programming language that is more versatile and computationally efficient (like python or C).</p>
</div>
</div>
</div>
<div class="section" id="installing-r">
<h2>Installing R<a class="headerlink" href="#installing-r" title="Permalink to this headline">¶</a></h2>
<p>If you are using a college computer, R will likely already be available. Otherwise you can install R on your own computer as follows:</p>
<p>On linux/ubuntu, run the following in terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install r-base r-base-dev
</pre></div>
</div>
<p>On Mac OS X, download and install from:
https://cran.r-project.org/bin/macosx/</p>
<p>On Windows, download and install from:
https://cran.r-project.org/bin/windows/base/</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Let’s briefly look at the bare-bones R interface and command line  interface (CLI), and then switch to a more Interactive Development  Environment (IDE) like vscode or RStudio.</p>
<p>Launch R (From Applications menu on Window or Mac, from terminal in  Linux/Ubuntu) — it should look something like this (on Linux/Ubuntu or Mac terminal):</p>
<p><img alt="image" src="../_images/R_Linux.png" /></p>
<p>Or like this (Windows “console”, similar in Mac):</p>
<p><img alt="image" src="../_images/HorrorVacui.png" /></p>
<div class="section" id="gooey-ides">
<h3>Gooey IDEs!<a class="headerlink" href="#gooey-ides" title="Permalink to this headline">¶</a></h3>
<p>To develop your R code, you should use an IDE (Interactive Development Environment) that offers useful features like syntax highlighting (google it!) and embedded data and plot viewing windows, such as RStudio, vscode, vim, etc.</p>
<p>These IDEs come with graphic user interfaces (GUI’s, or “gooeys”) of differing levels of sophistication and shiny-ness.</p>
<p>In fact, one of the reasons that R has become so popular is that there are some very nice, freely available GUI IDE’s for it where you can use your mouse to do certain “stuff”.</p>
<p>In particular, <a class="reference external" href="http://rstudio.org">RStudio</a> is very good.</p>
<p>A big advantage of something like RStudio is that you will get “syntax highlighting” wherein R language elements such as variables, commands, and brackets are differently colored. This is very handy and will make your R programming far more convenient and error-free. If you are using your own desktop/laptop, you can <a class="reference external" href="https://www.rstudio.com">download it freely</a> and install (versions are available for all computer platforms). If you are using a college computer, it should already be available.</p>
<p>The R chapters do not require you to use RStudio (everything will be command line based), but I would recommend that you to use it, or some other IDE like vscode or emacs.</p>
<p>Here’s what the RStudio window looks like:</p>
<p><img alt="image" src="../_images/RStudio.png" /></p>
<p>You are still in the R environment, but with some useful frills and  thrills. There are four main elements here (you can hide or resize any of them using the RStudio GUI options):</p>
<ul class="simple">
<li><p><em>Console</em>: This is the same R terminal you saw above. In this week we will work mainly in this console</p></li>
<li><p><em>Source code</em>: This panel is the code editor with syntax  highlighting and other handy features that we will explore soon. This  is where you will write your scripts/programs, and save them. To save,  you will use <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">S</span></code> and to execute it you will use <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">Shift</span> <span class="pre">+</span> <span class="pre">S</span></code></p></li>
<li><p><em>Environment</em>: This panel lists all the variables you created (more on this later). It has another tab that shows you the history of  the commands you typed</p></li>
<li><p><em>Plots</em>: This panel shows you all the plots you drew. Other tabs in this panel allow you to access the list of packages you have loaded, and the help page for commands (just type <code class="docutils literal notranslate"><span class="pre">help(command_name)</span></code> in the Console) and packages</p></li>
</ul>
<p>In RStudio, you can feed your mouse habit, but I strongly suggest using the terminal/console, and resist, to the extent possible, the  temptation to do everything using the shiny buttons you see (that is  the dark side pulling, my young <em>padawan</em>).</p>
</div>
</div>
<div class="section" id="r-basics">
<h2>R basics<a class="headerlink" href="#r-basics" title="Permalink to this headline">¶</a></h2>
<p>Lets get started with some R basics. You will be working by  entering R commands interactively at the R user prompt (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>). Up and down arrow keys scroll through your command history.</p>
<div class="section" id="useful-r-commands">
<h3>Useful R commands<a class="headerlink" href="#useful-r-commands" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Command</p></th>
<th class="text-align:left head"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">ls()</span></code></p></td>
<td class="text-align:left"><p>list all the variables in the work space</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">rm('a',</span> <span class="pre">'b')</span></code></p></td>
<td class="text-align:left"><p>remove variable(s) <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">rm(list=ls())</span></code></p></td>
<td class="text-align:left"><p>remove all variable(s)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">getwd()</span></code></p></td>
<td class="text-align:left"><p>get current working directory</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">setwd('Path')</span></code></p></td>
<td class="text-align:left"><p>set working directory to <code class="docutils literal notranslate"><span class="pre">Path</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">q()</span></code></p></td>
<td class="text-align:left"><p>quit R</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">?Command</span></code></p></td>
<td class="text-align:left"><p>show the documentation of <code class="docutils literal notranslate"><span class="pre">Command</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">??Keyword</span></code></p></td>
<td class="text-align:left"><p>search the all packages/functions with ‘Keyword’, “fuzzy search”</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="baby-steps">
<h3>Baby steps<a class="headerlink" href="#baby-steps" title="Permalink to this headline">¶</a></h3>
<p>Like in any programming language, you will need to use “variables” to store information in a R session’s workspace. Each variable has a reserved location in your <a class="reference external" href="https://en.wikipedia.org/wiki/Random-access_memory">RAM</a>, and takes up “real estate” in it — that is when you create a variable you reserve some space in your computer’s memory.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Now, let’s try assigning a few variables in R and doing things to them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="m">4</span>  <span class="c1"># store 4 as variable a</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="c1"># display it</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">4</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="c1"># product</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">16</div></div>
</div>
<p>Store a variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a_squared</span> <span class="o">&lt;-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sqrt</span><span class="p">(</span><span class="n">a_squared</span><span class="p">)</span> <span class="c1"># square root</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">4</div></div>
</div>
<p>Build a vector with <code class="docutils literal notranslate"><span class="pre">c</span></code> (for “concatenate”):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="c1"># Display the vector-valued variable you created</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
</ol>
</div></div>
</div>
<p>Note that any text after a “#” is ignored by R, like in many other languages — handy for commenting.</p>
<p>*In general, please comment your code and scripts, for <em>everybody’s</em> sake. You will be amazed by how difficult it is to read and understand what a certain R script does (or any other script, for that matter) without judicious comments — even scripts you yourself wrote not so long ago!</p>
<hr class="docutils" />
<blockquote>
<div><p><strong>The Concatenate function:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">c()</span></code>(concatenate) is one of the most commonly used R functions because it is the default method for combining multiple arguments into a vector. To learn more about it, type <code class="docutils literal notranslate"><span class="pre">?c</span></code> at the R prompt and hit enter.</p>
</div></blockquote>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.vector</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># check if v&#39;s a vector</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">mean</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># mean</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2</div></div>
</div>
<p>Thus, a <em>vector</em> is like a single column or row in a <em>spreadsheet</em> (just like it is in <a class="reference internal" href="05-Python_I.html"><span class="doc std std-doc">Python</span></a>). Multiple vectors can be combined to make a matrix (the full spreadsheet).</p>
<p>This is one of many ways R stores and processes data. More on R data types and objects below.</p>
<p>A single value (any kind) is a vector object of length 1 by default. That’s why in the R console you see <code class="docutils literal notranslate"> <span class="pre">[1]</span></code> before any single-value output (e.g., type <code class="docutils literal notranslate"><span class="pre">8</span></code>, and you will see <code class="docutils literal notranslate"><span class="pre">[1]</span> <span class="pre">8</span></code>).</p>
<p>Some examples of operations on vectors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">var</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># variance</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2.5</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">median</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># median</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sum</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># sum all elements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">10</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">prod</span><span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span> <span class="c1"># multiply</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">120</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">length</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># how many elements in the vector</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">5</div></div>
</div>
</div>
<div class="section" id="variable-names-and-tabbing">
<h3>Variable names and Tabbing<a class="headerlink" href="#variable-names-and-tabbing" title="Permalink to this headline">¶</a></h3>
<p>In R, you can name variables in the following way to keep track of related variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">wing.width.cm</span> <span class="o">&lt;-</span> <span class="m">1.2</span> <span class="c1">#Using dot notation</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">wing.length.cm</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">4.7</span><span class="p">,</span> <span class="m">5.2</span><span class="p">,</span> <span class="m">4.8</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This can be handy; type:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">wing.</span>
</pre></div>
</div>
<p>And then hit the <code class="docutils literal notranslate"> <span class="pre">tab</span></code>key to reveal all variables in that  category. This is nice — variable names should be as obvious as possible. However, they should not be over-long either! Good style and readability is more important than just convenient variable names.</p>
<p>In fact, R allows dots to be sued in variable names of all objects (not just objects that are variables). For example, functions names can have dots in them as well, as you will see below with the <code class="docutils literal notranslate"><span class="pre">is.*</span></code> family (e.g., <code class="docutils literal notranslate"><span class="pre">is.infinite()</span></code>, <code class="docutils literal notranslate"><span class="pre">is.nan()</span></code>, etc.).</p>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>The usual operators are available in R:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Operator</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">+</span></code></p></td>
<td class="text-align:left"><p>Addition</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">-</span></code></p></td>
<td class="text-align:left"><p>Subtraction</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">*</span></code></p></td>
<td class="text-align:left"><p>Multiplication</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">/</span></code></p></td>
<td class="text-align:left"><p>Division</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td class="text-align:left"><p>Power</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">%%</span></code></p></td>
<td class="text-align:left"><p>Modulo</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">%/%</span></code></p></td>
<td class="text-align:left"><p>Integer division</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">==</span></code></p></td>
<td class="text-align:left"><p>Equals</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">!=</span></code></p></td>
<td class="text-align:left"><p>Differs</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td class="text-align:left"><p>Greater</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td class="text-align:left"><p>Greater or equal</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">&amp;</span></code></p></td>
<td class="text-align:left"><p>Logical and</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>$</p></td>
<td class="text-align:left"><p>$</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">!</span></code></p></td>
<td class="text-align:left"><p>Logical not</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="when-things-go-wrong">
<h3>When things go wrong<a class="headerlink" href="#when-things-go-wrong" title="Permalink to this headline">¶</a></h3>
<p>Syntax errors are those where you’ve just made a mistake while typing code. Here are some common problems in R:</p>
<ul class="simple">
<li><p>Missing a closing bracket leads to continuation line, which looks something like this, with a <code class="docutils literal notranslate"><span class="pre">+</span></code> at the end:</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="m">1</span> <span class="o">+</span> <span class="p">(</span><span class="m">2</span> <span class="o">*</span> <span class="m">3</span><span class="p">)</span>
<span class="o">+</span> 
</pre></div>
</div>
<p>Hit <code class="docutils literal notranslate"> <span class="pre">Ctrl-C</span></code>(UNIX terminal or base R command line) or ESC (in in RStudio) or keep typing!</p>
<ul class="simple">
<li><p>Too many parentheses; for example, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">(2*3))</span></code></p></li>
<li><p>Wrong or mismatched brackets (see next subsection).</p></li>
<li><p>Mixing double and single quotes will also give you an error</p></li>
</ul>
<p>When things are taking too long and the R consile seems frozen, try <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">C</span></code> (UNIX terminal or base R command line) or ESC (in RStudio) to force an exit from whatever is going on.</p>
</div>
<div class="section" id="types-of-parentheses">
<h3>Types of parentheses<a class="headerlink" href="#types-of-parentheses" title="Permalink to this headline">¶</a></h3>
<p>R has specific uses for different types of Parentheses type that you need to get used to:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Parentheses type</p></th>
<th class="text-align:left head"><p>What it does</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">f(3,4)</span></code></p></td>
<td class="text-align:left"><p>call the function (or command) f, with the arguments 3 &amp; 4.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">(b*c)</span></code></p></td>
<td class="text-align:left"><p>to enforce order over which statements or calculations are executed. Here <code class="docutils literal notranslate"><span class="pre">(b*c)</span></code>is executed before adding to <code class="docutils literal notranslate"> <span class="pre">a</span></code>. Here is an alternative order: <code class="docutils literal notranslate"> <span class="pre">(a</span> <span class="pre">+</span> <span class="pre">b)*c</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">{expr1;</span> <span class="pre">expr2;...exprn}</span></code></p></td>
<td class="text-align:left"><p>group a set of expressions or commands into one compound expression. Value returned is value of last expression; used in building function, loops, and conditionals (more on these soon!).</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">x[4]</span></code></p></td>
<td class="text-align:left"><p>get the 4th element of the vector <code class="docutils literal notranslate"> <span class="pre">x</span></code>.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">li[[3]]</span></code></p></td>
<td class="text-align:left"><p>get the 3rd element of some list <code class="docutils literal notranslate"> <span class="pre">li</span></code>, and return it.(compare with <code class="docutils literal notranslate"><span class="pre">li[3]</span></code>, which returns a list with just the 3rd element inside). More on lists in next section.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="variable-types">
<h2>Variable types<a class="headerlink" href="#variable-types" title="Permalink to this headline">¶</a></h2>
<p>There are different kinds of data variable types in R, but you will basically need to know four for most of your work: integer, float (or “numeric”, including real numbers), string (or “character”, e.g.,
text), and Boolean (“logical”; <code class="docutils literal notranslate"> <span class="pre">True</span></code>or <code class="docutils literal notranslate"> <span class="pre">False</span></code>).</p>
<p>Try these:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="kc">TRUE</span>
<span class="nf">class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'logical'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="m">3.2</span>
<span class="nf">class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'numeric'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="m">2L</span>
<span class="nf">class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'integer'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="s">&quot;A string&quot;</span>
<span class="nf">class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'character'</div></div>
</div>
<p>Also, the <code class="docutils literal notranslate"><span class="pre">is.*</span></code> functions allows to check what type a variable is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
<span class="nf">is.na</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">&lt;-</span> <span class="m">0</span><span class="o">/</span><span class="m">0</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">NaN</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.nan</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">&lt;-</span> <span class="m">5</span><span class="o">/</span><span class="m">0</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">Inf</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.nan</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">FALSE</div></div>
</div>
<p>Beware of the difference between <code class="docutils literal notranslate"> <span class="pre">NA</span></code>(<code class="docutils literal notranslate"> <span class="pre">N</span></code>ot <code class="docutils literal notranslate"><span class="pre">A</span></code>vailable) and <code class="docutils literal notranslate"><span class="pre">NaN</span></code>(<code class="docutils literal notranslate"> <span class="pre">N</span></code>ot <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">N</span></code>umber). R will use <code class="docutils literal notranslate"> <span class="pre">NA</span></code>to represent/identify missing values in data or outputs, while  <code class="docutils literal notranslate"> <span class="pre">NaN</span></code>represent nonsense values (e.g., 0/0) that cannot be represented as a number or some other data type.</p>
<p>See what R has to say about this: try <code class="docutils literal notranslate"> <span class="pre">?is.nan</span></code>, <code class="docutils literal notranslate"> <span class="pre">?is.na</span></code>, <code class="docutils literal notranslate"> <span class="pre">?NA</span></code>, <code class="docutils literal notranslate"> <span class="pre">?NaN</span></code>in the R commandline (one at a time!).</p>
<p>There are also <code class="docutils literal notranslate"> <span class="pre">Inf</span></code>(Infinity, e.g., 1/0), and <code class="docutils literal notranslate"> <span class="pre">NULL</span></code> (variable not set) value types. Look these up as well using <code class="docutils literal notranslate"> <span class="pre">?</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.infinite</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.finite</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">FALSE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">is.finite</span><span class="p">(</span><span class="m">0</span><span class="o">/</span><span class="m">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">FALSE</div></div>
</div>
<div class="section" id="type-conversions-and-special-values">
<h3>Type Conversions and Special Values<a class="headerlink" href="#type-conversions-and-special-values" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">as.*</span></code> commands all convert a variable from one type to another. Try out the following examples:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.integer</span><span class="p">(</span><span class="m">3.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">3</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.numeric</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">4</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.roman</span><span class="p">(</span><span class="m">155</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] CLV
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.character</span><span class="p">(</span><span class="m">155</span><span class="p">)</span>  <span class="c1"># same as converting to string</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'155'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.logical</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<p><em>What just happened?!</em> R maps all values other than <code class="docutils literal notranslate"><span class="pre">0</span></code> to logical <code class="docutils literal notranslate"><span class="pre">True</span></code>, and <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This can be useful in some cases, for example, when you want to convert all your data to Presence-Absence only.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.logical</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">FALSE</div></div>
</div>
<p>Also, <em>keep an eye out for <code class="docutils literal notranslate"><span class="pre">E</span></code> notation in outputs of R functions for statistical analyses, and learn to interpret numbers formatted this way.</em>  R uses <code class="docutils literal notranslate"><span class="pre">E</span></code> notation in outputs of statistical tests to display  very large or small numbers. If you are not used to different  representations of long numbers, the <code class="docutils literal notranslate"><span class="pre">E</span></code> notation might be  confusing. Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1E4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">10000</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1e4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">10000</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">5e-2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">0.05</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1E4</span><span class="o">^</span><span class="m">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">1e+08</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="o">/</span> <span class="m">3</span> <span class="o">/</span> <span class="m">1e8</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">3.33333333333333e-09</div></div>
</div>
</div>
</div>
<div class="section" id="r-data-structures">
<h2>R Data Structures<a class="headerlink" href="#r-data-structures" title="Permalink to this headline">¶</a></h2>
<p>R comes with different built-in structures (objects) for data storage and manipulation. Mastering these, and knowing which one to use when will help you write better, more efficient programs and also handle diverse datasets (numbers, counts, names, dates, etc).</p>
<hr class="docutils" />
<blockquote>
<div><p><strong>Data “structures” vs. “objects” in R</strong>: You will often see the terms “object” and “data structure” thrown around in this and other chapters. These two have a very distinct meaning in object-oriented programs (OOPs) like Rand Python. The main thing you need to keep in mind is that a data structure is just a “dumb” container for data (e.g., a vector). An object, on the other hand can be a data structure, but also any other variables or functions in your R environment. R, being an OOP, needs to convert everything in the current environment to an object so that it knows what to do with each such entity — each object type has its own set of rules for operations and manipulations that R uses when interpreting your commands.</p>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="vectors">
<h3>Vectors<a class="headerlink" href="#vectors" title="Permalink to this headline">¶</a></h3>
<p>The Vector, which you have already seen above, is a fundamental data object / structure in R. Scalars (single data values) are treated as vector of length 1. <em>A vector is like a single column or row in a spreadsheet.</em></p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Now get back into R (if you somehow quit R using <code class="docutils literal notranslate"> <span class="pre">q()</span></code>or something else), and try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="m">5</span>
<span class="nf">is.vector</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">TRUE</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0.02</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;bc&quot;</span><span class="p">,</span> <span class="s">&quot;def&quot;</span><span class="p">,</span> <span class="s">&quot;ghij&quot;</span><span class="p">)</span>
<span class="n">v3</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span><span class="p">;</span><span class="n">v2</span><span class="p">;</span><span class="n">v3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0.02</li>
	<li>0.5</li>
	<li>1</li>
</ol>
</div><div class="output text_html"><ol class=list-inline>
	<li>'a'</li>
	<li>'bc'</li>
	<li>'def'</li>
	<li>'ghij'</li>
</ol>
</div><div class="output text_html"><ol class=list-inline>
	<li>TRUE</li>
	<li>TRUE</li>
	<li>FALSE</li>
</ol>
</div></div>
</div>
<p>R vectors can only store data of a single type (e.g., all numeric or all character). If you try to combine different types, R will homogenize everything to the same data type. To see this, try the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0.02</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">v1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0.02</li>
	<li>1</li>
	<li>1</li>
</ol>
</div></div>
</div>
<p>TRUE gets converted to 1.00!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0.02</span><span class="p">,</span> <span class="s">&quot;Mary&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">v1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'0.02'</li>
	<li>'Mary'</li>
	<li>'1'</li>
</ol>
</div></div>
</div>
<p>Everything gets converted to text!</p>
<p>Basically, the function <code class="docutils literal notranslate"><span class="pre">c</span></code> “coerces” arguments that are of mixed types (strings/text, real numbers, logical arguments, etc) to a common type.</p>
</div>
<div class="section" id="matrices-and-arrays">
<h3>Matrices and arrays<a class="headerlink" href="#matrices-and-arrays" title="Permalink to this headline">¶</a></h3>
<p>A R “matrix” is a 2 dimensional vector (has both rows and columns) and a “array” can store data in more than two dimensions (e.g., a stack of 2-D matrices).</p>
<p>R has many functions to build and manipulate matrices and arrays.</p>
<p>Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">25</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="n">mat1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>1 </td><td> 6</td><td>11</td><td>16</td><td>21</td></tr>
	<tr><td>2 </td><td> 7</td><td>12</td><td>17</td><td>22</td></tr>
	<tr><td>3 </td><td> 8</td><td>13</td><td>18</td><td>23</td></tr>
	<tr><td>4 </td><td> 9</td><td>14</td><td>19</td><td>24</td></tr>
	<tr><td>5 </td><td>10</td><td>15</td><td>20</td><td>25</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Note that the output in your terminal or console will more like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>	 <span class="o">[</span>,1<span class="o">]</span> <span class="o">[</span>,2<span class="o">]</span> <span class="o">[</span>,3<span class="o">]</span> <span class="o">[</span>,4<span class="o">]</span> <span class="o">[</span>,5<span class="o">]</span>
<span class="o">[</span><span class="m">1</span>,<span class="o">]</span> <span class="m">1</span>    <span class="m">6</span>   <span class="m">11</span>   <span class="m">16</span>   <span class="m">21</span>
<span class="o">[</span><span class="m">2</span>,<span class="o">]</span> <span class="m">2</span>    <span class="m">7</span>   <span class="m">12</span>   <span class="m">17</span>   <span class="m">22</span>
<span class="o">[</span><span class="m">3</span>,<span class="o">]</span> <span class="m">3</span>    <span class="m">8</span>   <span class="m">13</span>   <span class="m">18</span>   <span class="m">23</span>
<span class="o">[</span><span class="m">4</span>,<span class="o">]</span> <span class="m">4</span>    <span class="m">9</span>   <span class="m">14</span>   <span class="m">19</span>   <span class="m">24</span>
<span class="o">[</span><span class="m">5</span>,<span class="o">]</span> <span class="m">5</span>   <span class="m">10</span>   <span class="m">15</span>   <span class="m">20</span>   <span class="m">25</span>
</pre></div>
</div>
<p>The output looks different above because the R code is running in a jupyter notebook.</p>
<p>Now try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">25</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">byrow</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="n">mat1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td> 1</td><td> 2</td><td> 3</td><td> 4</td><td> 5</td></tr>
	<tr><td> 6</td><td> 7</td><td> 8</td><td> 9</td><td>10</td></tr>
	<tr><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td></tr>
	<tr><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td></tr>
	<tr><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>That is, you can order the elements of a matrix by row instead of column (default).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dim</span><span class="p">(</span><span class="n">mat1</span><span class="p">)</span> <span class="c1">#get the size of the matrix</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>5</li>
	<li>5</li>
</ol>
</div></div>
</div>
<p>To make an array consisting of two 5<span class="math notranslate nohighlight">\(\times\)</span>5 matrices containing the integers 1-50:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">arr1</span> <span class="o">&lt;-</span> <span class="nf">array</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">50</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
<span class="n">arr1</span><span class="p">[,,</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>1 </td><td> 6</td><td>11</td><td>16</td><td>21</td></tr>
	<tr><td>2 </td><td> 7</td><td>12</td><td>17</td><td>22</td></tr>
	<tr><td>3 </td><td> 8</td><td>13</td><td>18</td><td>23</td></tr>
	<tr><td>4 </td><td> 9</td><td>14</td><td>19</td><td>24</td></tr>
	<tr><td>5 </td><td>10</td><td>15</td><td>20</td><td>25</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">print</span><span class="p">(</span><span class="n">arr1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>, , 1

     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25

, , 2

     [,1] [,2] [,3] [,4] [,5]
[1,]   26   31   36   41   46
[2,]   27   32   37   42   47
[3,]   28   33   38   43   48
[4,]   29   34   39   44   49
[5,]   30   35   40   45   50
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">arr1</span><span class="p">[,,</span><span class="m">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>26</td><td>31</td><td>36</td><td>41</td><td>46</td></tr>
	<tr><td>27</td><td>32</td><td>37</td><td>42</td><td>47</td></tr>
	<tr><td>28</td><td>33</td><td>38</td><td>43</td><td>48</td></tr>
	<tr><td>29</td><td>34</td><td>39</td><td>44</td><td>49</td></tr>
	<tr><td>30</td><td>35</td><td>40</td><td>45</td><td>50</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Just like R vectors, R matrices and arrays have to be of a homogeneous type, and R will do the same sort of type homogenization you saw for R vectors above (try inserting a text value in <code class="docutils literal notranslate"><span class="pre">mat1</span></code>and see what happens). Thus R’s matrix and array are similar to Python’s <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array and matrix data structures.</p>
</div>
<div class="section" id="data-frames">
<h3>Data frames<a class="headerlink" href="#data-frames" title="Permalink to this headline">¶</a></h3>
<p>This is a very important data structure in R. Unlike matrices and vectors, R data frames can store data in which each column contains a different data type (e.g., numbers, strings, boolean) or even a combination of data types, just like a standard spreadsheet. Indeed, the dataframe data type was built to emulate some of the convenient properties of spreadsheets. Many statistical and plotting functions and packages in R naturally use data frames.</p>
<p>Let’s build and manipulate a dataframe. First create three vectors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">Col1</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span>
<span class="n">Col1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
	<li>8</li>
	<li>9</li>
	<li>10</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">Col2</span> <span class="o">&lt;-</span> <span class="kc">LETTERS</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">]</span>
<span class="n">Col2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'A'</li>
	<li>'B'</li>
	<li>'C'</li>
	<li>'D'</li>
	<li>'E'</li>
	<li>'F'</li>
	<li>'G'</li>
	<li>'H'</li>
	<li>'I'</li>
	<li>'J'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">Col3</span> <span class="o">&lt;-</span> <span class="nf">runif</span><span class="p">(</span><span class="m">10</span><span class="p">)</span> <span class="c1"># 10 random numbers from a uniform distribution</span>
<span class="n">Col3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0.486208951799199</li>
	<li>0.351627267198637</li>
	<li>0.00923178461380303</li>
	<li>0.260288582649082</li>
	<li>0.732009649975225</li>
	<li>0.514418598730117</li>
	<li>0.436963841086254</li>
	<li>0.125084438826889</li>
	<li>0.455181437544525</li>
	<li>0.35659100767225</li>
</ol>
</div></div>
</div>
<p>Now combine them into a dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">Col1</span><span class="p">,</span> <span class="n">Col2</span><span class="p">,</span> <span class="n">Col3</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Col1 Col2        Col3
1     1    A 0.486208952
2     2    B 0.351627267
3     3    C 0.009231785
4     4    D 0.260288583
5     5    E 0.732009650
6     6    F 0.514418599
7     7    G 0.436963841
8     8    H 0.125084439
9     9    I 0.455181438
10   10    J 0.356591008
</pre></div>
</div>
</div>
</div>
<p>Again, this output looks different from your terminal/console output because these commands are running in a Jupyter notebook.</p>
<p>You can easily assign names to the columns of dataframes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">names</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;MyFirstColumn&quot;</span><span class="p">,</span> <span class="s">&quot;My Second Column&quot;</span><span class="p">,</span> <span class="s">&quot;My.Third.Column&quot;</span><span class="p">)</span>
<span class="n">MyDF</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>MyFirstColumn</th><th scope=col>My Second Column</th><th scope=col>My.Third.Column</th></tr></thead>
<tbody>
	<tr><td> 1         </td><td>A          </td><td>0.486208952</td></tr>
	<tr><td> 2         </td><td>B          </td><td>0.351627267</td></tr>
	<tr><td> 3         </td><td>C          </td><td>0.009231785</td></tr>
	<tr><td> 4         </td><td>D          </td><td>0.260288583</td></tr>
	<tr><td> 5         </td><td>E          </td><td>0.732009650</td></tr>
	<tr><td> 6         </td><td>F          </td><td>0.514418599</td></tr>
	<tr><td> 7         </td><td>G          </td><td>0.436963841</td></tr>
	<tr><td> 8         </td><td>H          </td><td>0.125084439</td></tr>
	<tr><td> 9         </td><td>I          </td><td>0.455181438</td></tr>
	<tr><td>10         </td><td>J          </td><td>0.356591008</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>And unlike matrices, you can access the contents of data frames by naming the columns directly using a $ sign:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="o">$</span><span class="n">MyFirstColumn</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
	<li>8</li>
	<li>9</li>
	<li>10</li>
</ol>
</div></div>
</div>
<p>But don’t use spaces in column names! Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="o">$</span><span class="n">My</span> <span class="n">Second</span> <span class="n">Column</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>Error in parse(text = x, srcfile = src): &lt;text&gt;:1:9: unexpected symbol
1: MyDF$My Second
            ^
Traceback:
</pre></div>
</div>
</div>
</div>
<p>That gives an error, because R cannot handle spaces in column names easily.</p>
<p>So replace that column name using the <code class="docutils literal notranslate"><span class="pre">colnames</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">colnames</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'MyFirstColumn'</li>
	<li>'My Second Column'</li>
	<li>'My.Third.Column'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">colnames</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&quot;MySecondColumn&quot;</span>
<span class="n">MyDF</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>MyFirstColumn</th><th scope=col>MySecondColumn</th><th scope=col>My.Third.Column</th></tr></thead>
<tbody>
	<tr><td> 1         </td><td>A          </td><td>0.486208952</td></tr>
	<tr><td> 2         </td><td>B          </td><td>0.351627267</td></tr>
	<tr><td> 3         </td><td>C          </td><td>0.009231785</td></tr>
	<tr><td> 4         </td><td>D          </td><td>0.260288583</td></tr>
	<tr><td> 5         </td><td>E          </td><td>0.732009650</td></tr>
	<tr><td> 6         </td><td>F          </td><td>0.514418599</td></tr>
	<tr><td> 7         </td><td>G          </td><td>0.436963841</td></tr>
	<tr><td> 8         </td><td>H          </td><td>0.125084439</td></tr>
	<tr><td> 9         </td><td>I          </td><td>0.455181438</td></tr>
	<tr><td>10         </td><td>J          </td><td>0.356591008</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>But using dots in column names is OK (just as it is for variable names):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="o">$</span><span class="n">My.Third.Column</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0.486208951799199</li>
	<li>0.351627267198637</li>
	<li>0.00923178461380303</li>
	<li>0.260288582649082</li>
	<li>0.732009649975225</li>
	<li>0.514418598730117</li>
	<li>0.436963841086254</li>
	<li>0.125084438826889</li>
	<li>0.455181437544525</li>
	<li>0.35659100767225</li>
</ol>
</div></div>
</div>
<p>You can also access elements by using numerical indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="p">[,</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
	<li>8</li>
	<li>9</li>
	<li>10</li>
</ol>
</div></div>
</div>
<p>That is, you asked R to return values of <code class="docutils literal notranslate"><span class="pre">MyDF</span></code> in all Rows (therefore, nothing before the comma), and the first column (<code class="docutils literal notranslate"><span class="pre">1</span></code> after the comma).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">1</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;MyFirstColumn&quot;</span><span class="p">,</span><span class="s">&quot;My.Third.Column&quot;</span><span class="p">)]</span> <span class="c1"># show two specific columns only</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>MyFirstColumn</th><th scope=col>My.Third.Column</th></tr></thead>
<tbody>
	<tr><td> 1         </td><td>0.486208952</td></tr>
	<tr><td> 2         </td><td>0.351627267</td></tr>
	<tr><td> 3         </td><td>0.009231785</td></tr>
	<tr><td> 4         </td><td>0.260288583</td></tr>
	<tr><td> 5         </td><td>0.732009650</td></tr>
	<tr><td> 6         </td><td>0.514418599</td></tr>
	<tr><td> 7         </td><td>0.436963841</td></tr>
	<tr><td> 8         </td><td>0.125084439</td></tr>
	<tr><td> 9         </td><td>0.455181438</td></tr>
	<tr><td>10         </td><td>0.356591008</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>You can check whether a particular object is a dataframe data structure with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'data.frame'</div></div>
</div>
<p>You can check the structure of a dataframe with <code class="docutils literal notranslate"><span class="pre">str()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data.frame&#39;:	10 obs. of  3 variables:
 $ MyFirstColumn  : int  1 2 3 4 5 6 7 8 9 10
 $ MySecondColumn : Factor w/ 10 levels &quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,..: 1 2 3 4 5 6 7 8 9 10
 $ My.Third.Column: num  0.48621 0.35163 0.00923 0.26029 0.73201 ...
</pre></div>
</div>
</div>
</div>
<p>You can print the column names and top few rows with <code class="docutils literal notranslate"><span class="pre">head()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>MyFirstColumn</th><th scope=col>MySecondColumn</th><th scope=col>My.Third.Column</th></tr></thead>
<tbody>
	<tr><td>1          </td><td>A          </td><td>0.486208952</td></tr>
	<tr><td>2          </td><td>B          </td><td>0.351627267</td></tr>
	<tr><td>3          </td><td>C          </td><td>0.009231785</td></tr>
	<tr><td>4          </td><td>D          </td><td>0.260288583</td></tr>
	<tr><td>5          </td><td>E          </td><td>0.732009650</td></tr>
	<tr><td>6          </td><td>F          </td><td>0.514418599</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>And the bottom few rows with <code class="docutils literal notranslate"><span class="pre">tail()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">tail</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th></th><th scope=col>MyFirstColumn</th><th scope=col>MySecondColumn</th><th scope=col>My.Third.Column</th></tr></thead>
<tbody>
	<tr><th scope=row>5</th><td> 5       </td><td>E        </td><td>0.7320096</td></tr>
	<tr><th scope=row>6</th><td> 6       </td><td>F        </td><td>0.5144186</td></tr>
	<tr><th scope=row>7</th><td> 7       </td><td>G        </td><td>0.4369638</td></tr>
	<tr><th scope=row>8</th><td> 8       </td><td>H        </td><td>0.1250844</td></tr>
	<tr><th scope=row>9</th><td> 9       </td><td>I        </td><td>0.4551814</td></tr>
	<tr><th scope=row>10</th><td>10       </td><td>J        </td><td>0.3565910</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Why is the <code class="docutils literal notranslate"><span class="pre">MySecondColumn</span></code>in the data frame you created of the “factor” data type? R by default converts dataframes columns containing <em>only text (strings)</em> to a factor type, which has “levels”. The <code class="docutils literal notranslate"><span class="pre">factor</span></code> data type is special; it encodes the dataframe columns containing strings-only to be a “grouping variable”, which is convenient for statistical analyses using one of the many statistical commands or routines available in R.</p>
<p>You can convert particular vectors of a dataframe to and from the <code class="docutils literal notranslate"><span class="pre">factor</span></code>class. Try the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="nf">as.factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">))</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'factor'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">levels</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'1'</li>
	<li>'2'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">MyDF</span><span class="o">$</span><span class="n">MySecondColumn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'factor'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span><span class="o">$</span><span class="n">MySecondColumn</span> <span class="o">&lt;-</span> <span class="nf">as.character</span><span class="p">(</span><span class="n">MyDF</span><span class="o">$</span><span class="n">MySecondColumn</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">MyDF</span><span class="o">$</span><span class="n">MySecondColumn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'character'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data.frame&#39;:	10 obs. of  3 variables:
 $ MyFirstColumn  : int  1 2 3 4 5 6 7 8 9 10
 $ MySecondColumn : chr  &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; ...
 $ My.Third.Column: num  0.48621 0.35163 0.00923 0.26029 0.73201 ...
</pre></div>
</div>
</div>
</div>
<p>Compare this with the output of the previous <code class="docutils literal notranslate"><span class="pre">str()</span></code> call.</p>
</div>
<div class="section" id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Permalink to this headline">¶</a></h3>
<p>A list is used to collect a group of data objects of different sizes and types (e.g., one whole data frame and one vector can both be in a single list). It is simply an ordered collection of objects (that can be variables). The outputs of many statistical functions in R are lists (e.g. linear model fitting using <code class="docutils literal notranslate"> <span class="pre">lm()</span></code>), to return all relevant information in one output object. So you need to know how to unpack and manipulate lists.</p>
<p>As a budding multilingual quantitative biologist, you should not be perturbed by the fact that a <code class="docutils literal notranslate"><span class="pre">list</span></code> is a very different data structure in python vs R. It will take some practice — sometimes the same word means different things in different human languages too!</p>
<p>Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span> <span class="o">&lt;-</span> <span class="nf">list</span><span class="p">(</span><span class="n">species</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Quercus robur&quot;</span><span class="p">,</span><span class="s">&quot;Fraxinus excelsior&quot;</span><span class="p">),</span> <span class="n">age</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">123</span><span class="p">,</span> <span class="m">84</span><span class="p">))</span>
<span class="n">MyList</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><dl>
	<dt>$species</dt>
		<dd><ol class=list-inline>
	<li>'Quercus robur'</li>
	<li>'Fraxinus excelsior'</li>
</ol>
</dd>
	<dt>$age</dt>
		<dd><ol class=list-inline>
	<li>123</li>
	<li>84</li>
</ol>
</dd>
</dl>
</div></div>
</div>
<p>You can access contents of a list item using number of the item instead of name using nested square brackets:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'Quercus robur'</li>
	<li>'Fraxinus excelsior'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercus robur'</div></div>
</div>
<p>or using the name in either this way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="o">$</span><span class="n">species</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'Quercus robur'</li>
	<li>'Fraxinus excelsior'</li>
</ol>
</div></div>
</div>
<p>or this way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="p">[[</span><span class="s">&quot;species&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'Quercus robur'</li>
	<li>'Fraxinus excelsior'</li>
</ol>
</div></div>
</div>
<p>And to access a specific element inside a list’s item</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyList</span><span class="o">$</span><span class="n">species</span><span class="p">[</span><span class="m">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercus robur'</div></div>
</div>
<p>A more complex list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">pop1</span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">species</span><span class="o">=</span><span class="s">&#39;Cancer magister&#39;</span><span class="p">,</span>
           <span class="n">latitude</span><span class="o">=</span><span class="m">48.3</span><span class="p">,</span><span class="n">longitude</span><span class="o">=</span><span class="m">-123.1</span><span class="p">,</span>
           <span class="n">startyr</span><span class="o">=</span><span class="m">1980</span><span class="p">,</span><span class="n">endyr</span><span class="o">=</span><span class="m">1985</span><span class="p">,</span>
           <span class="n">pop</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">303</span><span class="p">,</span><span class="m">402</span><span class="p">,</span><span class="m">101</span><span class="p">,</span><span class="m">607</span><span class="p">,</span><span class="m">802</span><span class="p">,</span><span class="m">35</span><span class="p">))</span>
<span class="n">pop1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><dl>
	<dt>$species</dt>
		<dd>'Cancer magister'</dd>
	<dt>$latitude</dt>
		<dd>48.3</dd>
	<dt>$longitude</dt>
		<dd>-123.1</dd>
	<dt>$startyr</dt>
		<dd>1980</dd>
	<dt>$endyr</dt>
		<dd>1985</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>303</li>
	<li>402</li>
	<li>101</li>
	<li>607</li>
	<li>802</li>
	<li>35</li>
</ol>
</dd>
</dl>
</div></div>
</div>
<p>You can build lists of lists too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">pop1</span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="m">19</span><span class="p">,</span><span class="n">long</span><span class="o">=</span><span class="m">57</span><span class="p">,</span>
           <span class="n">pop</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="m">101</span><span class="p">,</span><span class="m">99</span><span class="p">))</span>
<span class="n">pop2</span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="m">56</span><span class="p">,</span><span class="n">long</span><span class="o">=</span><span class="m">-120</span><span class="p">,</span>
           <span class="n">pop</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">))</span>
<span class="n">pop3</span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="m">32</span><span class="p">,</span><span class="n">long</span><span class="o">=</span><span class="m">-10</span><span class="p">,</span>
           <span class="n">pop</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">12</span><span class="p">,</span><span class="m">11</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">14</span><span class="p">))</span>
<span class="n">pops</span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">sp1</span><span class="o">=</span><span class="n">pop1</span><span class="p">,</span><span class="n">sp2</span><span class="o">=</span><span class="n">pop2</span><span class="p">,</span><span class="n">sp3</span><span class="o">=</span><span class="n">pop3</span><span class="p">)</span>
<span class="n">pops</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><dl>
	<dt>$sp1</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>19</dd>
	<dt>$long</dt>
		<dd>57</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>100</li>
	<li>101</li>
	<li>99</li>
</ol>
</dd>
</dl>
</dd>
	<dt>$sp2</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>56</dd>
	<dt>$long</dt>
		<dd>-120</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>1</li>
	<li>4</li>
	<li>7</li>
	<li>7</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
</ol>
</dd>
</dl>
</dd>
	<dt>$sp3</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>32</dd>
	<dt>$long</dt>
		<dd>-10</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>12</li>
	<li>11</li>
	<li>2</li>
	<li>1</li>
	<li>14</li>
</ol>
</dd>
</dl>
</dd>
</dl>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">pops</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="o">$</span><span class="n">lat</span> <span class="c1">#latitude of second species</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">56</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">pops</span><span class="p">[[</span><span class="m">3</span><span class="p">]]</span><span class="o">$</span><span class="n">pop</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="o">&lt;-</span><span class="m">102</span> <span class="c1">#change population of third species at third time step</span>
<span class="n">pops</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><dl>
	<dt>$sp1</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>19</dd>
	<dt>$long</dt>
		<dd>57</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>100</li>
	<li>101</li>
	<li>99</li>
</ol>
</dd>
</dl>
</dd>
	<dt>$sp2</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>56</dd>
	<dt>$long</dt>
		<dd>-120</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>1</li>
	<li>4</li>
	<li>7</li>
	<li>7</li>
	<li>2</li>
	<li>1</li>
	<li>2</li>
</ol>
</dd>
</dl>
</dd>
	<dt>$sp3</dt>
		<dd><dl>
	<dt>$lat</dt>
		<dd>32</dd>
	<dt>$long</dt>
		<dd>-10</dd>
	<dt>$pop</dt>
		<dd><ol class=list-inline>
	<li>12</li>
	<li>11</li>
	<li>102</li>
	<li>1</li>
	<li>14</li>
</ol>
</dd>
</dl>
</dd>
</dl>
</div></div>
</div>
<p>Maybe you have guessed by now that R dataframes are actually a kind of list.</p>
</div>
<div class="section" id="matrix-vs-dataframe">
<h3>Matrix vs Dataframe<a class="headerlink" href="#matrix-vs-dataframe" title="Permalink to this headline">¶</a></h3>
<p>If dataframes are so nice, why use R matrices at all? The problem is that dataframes can be too slow when large numbers of mathematical calculations or operations (e.g., matrix - vectir multiplications or other linear algebra operations) need to be performed. In such cases, you will need to convert a dataframe to a matrix. But for statistical analyses, plotting, and writing output of standard R analyses to a file, data frames are more convenient. Dataframes also allow you to refer to columns by name (using <code class="docutils literal notranslate"><span class="pre">$</span></code>), which is often convenient.</p>
<p>To see the difference in memory usage of matrices vs dataframes, try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyMat</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">MyMat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>1</td><td>5</td><td>1</td><td>5</td></tr>
	<tr><td>2</td><td>6</td><td>2</td><td>6</td></tr>
	<tr><td>3</td><td>7</td><td>3</td><td>7</td></tr>
	<tr><td>4</td><td>8</td><td>4</td><td>8</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyDF</span> <span class="o">=</span> <span class="nf">as.data.frame</span><span class="p">(</span><span class="n">MyMat</span><span class="p">)</span>
<span class="n">MyDF</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>V1</th><th scope=col>V2</th><th scope=col>V3</th><th scope=col>V4</th></tr></thead>
<tbody>
	<tr><td>1</td><td>5</td><td>1</td><td>5</td></tr>
	<tr><td>2</td><td>6</td><td>2</td><td>6</td></tr>
	<tr><td>3</td><td>7</td><td>3</td><td>7</td></tr>
	<tr><td>4</td><td>8</td><td>4</td><td>8</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">object.size</span><span class="p">(</span><span class="n">MyMat</span><span class="p">)</span> <span class="c1"># returns size of an R object (variable) in bytes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>264 bytes
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">object.size</span><span class="p">(</span><span class="n">MyDF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1048 bytes
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-and-manipulating-data">
<h2>Creating and manipulating data<a class="headerlink" href="#creating-and-manipulating-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-sequences">
<h3>Creating sequences<a class="headerlink" href="#creating-sequences" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">:</span></code> operator creates vectors of sequential integers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">years</span> <span class="o">&lt;-</span> <span class="m">1990</span><span class="o">:</span><span class="m">2009</span>
<span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1990</li>
	<li>1991</li>
	<li>1992</li>
	<li>1993</li>
	<li>1994</li>
	<li>1995</li>
	<li>1996</li>
	<li>1997</li>
	<li>1998</li>
	<li>1999</li>
	<li>2000</li>
	<li>2001</li>
	<li>2002</li>
	<li>2003</li>
	<li>2004</li>
	<li>2005</li>
	<li>2006</li>
	<li>2007</li>
	<li>2008</li>
	<li>2009</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">years</span> <span class="o">&lt;-</span> <span class="m">2009</span><span class="o">:</span><span class="m">1990</span> <span class="c1"># or in reverse order </span>
<span class="n">years</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>2009</li>
	<li>2008</li>
	<li>2007</li>
	<li>2006</li>
	<li>2005</li>
	<li>2004</li>
	<li>2003</li>
	<li>2002</li>
	<li>2001</li>
	<li>2000</li>
	<li>1999</li>
	<li>1998</li>
	<li>1997</li>
	<li>1996</li>
	<li>1995</li>
	<li>1994</li>
	<li>1993</li>
	<li>1992</li>
	<li>1991</li>
	<li>1990</li>
</ol>
</div></div>
</div>
<p>For sequences of float numbers, you have to use <code class="docutils literal notranslate"><span class="pre">seq()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>1.5</li>
	<li>2</li>
	<li>2.5</li>
	<li>3</li>
	<li>3.5</li>
	<li>4</li>
	<li>4.5</li>
	<li>5</li>
	<li>5.5</li>
	<li>6</li>
	<li>6.5</li>
	<li>7</li>
	<li>7.5</li>
	<li>8</li>
	<li>8.5</li>
	<li>9</li>
	<li>9.5</li>
	<li>10</li>
</ol>
</div></div>
</div>
<hr class="docutils" />
<blockquote>
<div><p>Don’t forget, you can get help on a particular R command by prefixing it with <code class="docutils literal notranslate"><span class="pre">?</span></code>. For example, try:</p>
</div></blockquote>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="o">?</span><span class="n">seq</span>
</pre></div>
</div>
<hr class="docutils" />
<p>You can also use <code class="docutils literal notranslate"><span class="pre">seq(from=1,to=10,</span> <span class="pre">by=0.5)</span> </code>OR<code class="docutils literal notranslate"> <span class="pre">seq(from=1,</span> <span class="pre">by=0.5,</span> <span class="pre">to=10)</span></code> with the same effect (try it). This explicit, “argument matching” approach is partly what makes R so popular and accessible to a wider range of users.</p>
</div>
<div class="section" id="accessing-parts-of-data-stuctures-indices-and-indexing">
<h3>Accessing parts of data stuctures: Indices and Indexing<a class="headerlink" href="#accessing-parts-of-data-stuctures-indices-and-indexing" title="Permalink to this headline">¶</a></h3>
<p>Every element (entry) of a vector in R has an order (an “index” value): the first value, second, third, etc. To illustrate this, let’s create a simple vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyVar</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span> <span class="s">&#39;a&#39;</span> <span class="p">,</span> <span class="s">&#39;b&#39;</span> <span class="p">,</span> <span class="s">&#39;c&#39;</span> <span class="p">,</span> <span class="s">&#39;d&#39;</span> <span class="p">,</span> <span class="s">&#39;e&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Then, square brackets extract values based on their numerical order in the vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyVar</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="c1"># Show element in first position </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'a'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyVar</span><span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="c1"># Show element in fourth position </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'d'</div></div>
</div>
<p>The values in square brackets are called “indices” — they give the index (position) of the required value. We can also select sets of values in different orders, or repeat values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyVar</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">)]</span> <span class="c1"># reverse order</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'c'</li>
	<li>'b'</li>
	<li>'a'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyVar</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">5</span><span class="p">)]</span> <span class="c1"># repeat indices</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'a'</li>
	<li>'a'</li>
	<li>'e'</li>
	<li>'e'</li>
</ol>
</div></div>
</div>
<p>You can also manipulate data structures/objects by indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># Create a vector named v</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="p">[</span><span class="m">3</span><span class="p">]</span> <span class="c1"># access one element</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">]</span> <span class="c1"># access sequential elements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>1</li>
	<li>2</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="p">[</span><span class="m">-3</span><span class="p">]</span> <span class="c1"># remove elements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>1</li>
	<li>3</li>
	<li>4</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">)]</span> <span class="c1"># access non-sequential indices</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>3</li>
</ol>
</div></div>
</div>
<p>For matrices, you need to use both row and column indices:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">25</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">byrow</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1">#create a matrix</span>
<span class="n">mat1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td> 1</td><td> 2</td><td> 3</td><td> 4</td><td> 5</td></tr>
	<tr><td> 6</td><td> 7</td><td> 8</td><td> 9</td><td>10</td></tr>
	<tr><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td></tr>
	<tr><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td></tr>
	<tr><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>2</li>
	<li>3</li>
	<li>4</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>2</td><td>3</td><td>4</td></tr>
	<tr><td>7</td><td>8</td><td>9</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>And to get all elements in a particular row or column, you need to leave the value blank:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span> <span class="c1"># First row, all columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mat1</span><span class="p">[,</span><span class="m">1</span><span class="p">]</span> <span class="c1"># First column, all rows</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>6</li>
	<li>11</li>
	<li>16</li>
	<li>21</li>
</ol>
</div></div>
</div>
</div>
<div class="section" id="recycling">
<h3>Recycling<a class="headerlink" href="#recycling" title="Permalink to this headline">¶</a></h3>
<p>When vectors are of different lengths, R will recycle the shorter one to make a vector of the same length:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">)</span> <span class="o">+</span> <span class="m">2</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>3</li>
	<li>7</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">);</span> <span class="n">y</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">9</span><span class="p">,</span><span class="m">2</span><span class="p">)</span>
<span class="n">x</span><span class="p">;</span><span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
</ol>
</div><div class="output text_html"><ol class=list-inline>
	<li>5</li>
	<li>3</li>
	<li>9</li>
	<li>2</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>6</li>
	<li>5</li>
	<li>10</li>
	<li>4</li>
</ol>
</div></div>
</div>
<p>Strange! R just recycled <code class="docutils literal notranslate"><span class="pre">x</span></code> (repeated <code class="docutils literal notranslate"><span class="pre">1,2</span></code> twice) so that the two vectors could be summed! here’s another example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="nf">c</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message in x + c(y, 1):
“longer object length is not a multiple of shorter object length”
</pre></div>
</div>
<div class="output text_html"><ol class=list-inline>
	<li>6</li>
	<li>5</li>
	<li>10</li>
	<li>4</li>
	<li>2</li>
</ol>
</div></div>
</div>
<p><em>Think about what happened here</em>. R is clearly not comfortable doing this, so it warns you! Recycling could be convenient at times, but is dangerous!</p>
</div>
<div class="section" id="basic-vector-matrix-operations">
<h3>Basic vector-matrix operations<a class="headerlink" href="#basic-vector-matrix-operations" title="Permalink to this headline">¶</a></h3>
<p>You can perform the usual vector matrix operations on R <code class="docutils literal notranslate"><span class="pre">vectors</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">&lt;-</span> <span class="n">v</span><span class="o">*</span><span class="m">2</span> <span class="c1"># multiply whole vector by 2</span>
<span class="n">v2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>2</li>
	<li>4</li>
	<li>6</li>
	<li>8</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">*</span> <span class="n">v2</span> <span class="c1"># element-wise product</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>2</li>
	<li>8</li>
	<li>18</li>
	<li>32</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">t</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># transpose the vector</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">%*%</span> <span class="nf">t</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># matrix/vector product</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>0 </td><td>0 </td><td>0 </td><td> 0</td><td> 0</td></tr>
	<tr><td>0 </td><td>1 </td><td>2 </td><td> 3</td><td> 4</td></tr>
	<tr><td>0 </td><td>2 </td><td>4 </td><td> 6</td><td> 8</td></tr>
	<tr><td>0 </td><td>3 </td><td>6 </td><td> 9</td><td>12</td></tr>
	<tr><td>0 </td><td>4 </td><td>8 </td><td>12</td><td>16</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v3</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">7</span> <span class="c1"># assign using sequence</span>
<span class="n">v3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">v4</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span> <span class="c1"># concatenate vectors</span>
<span class="n">v4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0</li>
	<li>2</li>
	<li>4</li>
	<li>6</li>
	<li>8</li>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
</ol>
</div></div>
</div>
</div>
<div class="section" id="strings-and-pasting">
<h3>Strings and Pasting<a class="headerlink" href="#strings-and-pasting" title="Permalink to this headline">¶</a></h3>
<p>It is important to know how to handle strings in R for two main reasons:</p>
<ul class="simple">
<li><p>To deal with text data, such as names of experimental treatments</p></li>
<li><p>To generate appropriate text labels and titles for figures</p></li>
</ul>
<p>Let’s try creating and manipulating strings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">species.name</span> <span class="o">&lt;-</span> <span class="s">&quot;Quercus robur&quot;</span> <span class="c1">#You can alo use single quotes</span>
<span class="n">species.name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercus robur'</div></div>
</div>
<p>To combine to strings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Quercus&quot;</span><span class="p">,</span> <span class="s">&quot;robur&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercus robur'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Quercus&quot;</span><span class="p">,</span> <span class="s">&quot;robur&quot;</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="c1">#Get rid of space</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercusrobur'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Quercus&quot;</span><span class="p">,</span> <span class="s">&quot;robur&quot;</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;, &quot;</span><span class="p">)</span> <span class="c1">#insert comma to separate</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Quercus, robur'</div></div>
</div>
<p>As you can see above, both double and single quotes work, but using double quotes is better because it will allow you to define strings that contain a single quotes, which is often necessary.</p>
<p>And as is the case with so many R functions, pasting works on vectors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;Year is:&#39;</span><span class="p">,</span> <span class="m">1990</span><span class="o">:</span><span class="m">2000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'Year is: 1990'</li>
	<li>'Year is: 1991'</li>
	<li>'Year is: 1992'</li>
	<li>'Year is: 1993'</li>
	<li>'Year is: 1994'</li>
	<li>'Year is: 1995'</li>
	<li>'Year is: 1996'</li>
	<li>'Year is: 1997'</li>
	<li>'Year is: 1998'</li>
	<li>'Year is: 1999'</li>
	<li>'Year is: 2000'</li>
</ol>
</div></div>
</div>
<p>Note that this last example creates a vector of 11 strings as it is 1990:2000 <em>inclusive</em>.</p>
</div>
<div class="section" id="useful-r-functions">
<h3>Useful R functions<a class="headerlink" href="#useful-r-functions" title="Permalink to this headline">¶</a></h3>
<p>There are a number of very useful functions available by default (in the “base packages”). Some particularly useful ones are listed below.</p>
<div class="section" id="for-manipulating-strings">
<h4>For manipulating strings<a class="headerlink" href="#for-manipulating-strings" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Function</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">strsplit(x,';')</span></code></p></td>
<td class="text-align:left"><p>Split the string <code class="docutils literal notranslate"><span class="pre">x</span></code> at ‘;’</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">nchar(x)</span></code></p></td>
<td class="text-align:left"><p>Number of characters in string <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">toupper(x)</span></code></p></td>
<td class="text-align:left"><p>Set string <code class="docutils literal notranslate"><span class="pre">x</span></code> to upper case</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">tolower(x)</span></code></p></td>
<td class="text-align:left"><p>Set string <code class="docutils literal notranslate"><span class="pre">x</span></code> to lower case</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">paste(x1,x2,sep=';')</span></code></p></td>
<td class="text-align:left"><p>Join the two strings using ‘;’</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mathematical">
<h4>Mathematical<a class="headerlink" href="#mathematical" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Function</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">log(x)</span></code></p></td>
<td class="text-align:left"><p>Natural logarithm of the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">log10(x)</span></code></p></td>
<td class="text-align:left"><p>Logarithm in base 10 of the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">exp(x)</span></code></p></td>
<td class="text-align:left"><p>Exponential of the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code> (<span class="math notranslate nohighlight">\(e^x\)</span>)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">abs(x)</span></code></p></td>
<td class="text-align:left"><p>Absolute value of the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">floor(x)</span></code></p></td>
<td class="text-align:left"><p>Largest integer smaller than the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">ceiling(x)</span></code></p></td>
<td class="text-align:left"><p>Smallest integer greater than the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sqrt(x)</span></code></p></td>
<td class="text-align:left"><p>Square root of the number (or every number in the vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code> (<span class="math notranslate nohighlight">\(\sqrt{x}\)</span>)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sin(x)</span></code></p></td>
<td class="text-align:left"><p>Sine function of the number (or every number in a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">pi</span></code></p></td>
<td class="text-align:left"><p>Value of the constant <span class="math notranslate nohighlight">\(\pi\)</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="statistical">
<h4>Statistical<a class="headerlink" href="#statistical" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Function</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">mean(x)</span></code></p></td>
<td class="text-align:left"><p>Compute mean of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sd(x)</span></code></p></td>
<td class="text-align:left"><p>Standard deviation of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">var(x)</span></code></p></td>
<td class="text-align:left"><p>Variance of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">median(x)</span></code></p></td>
<td class="text-align:left"><p>Median of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">quantile(x,0.05)</span></code></p></td>
<td class="text-align:left"><p>Compute the 0.05 quantile of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">range(x)</span></code></p></td>
<td class="text-align:left"><p>Range of the data in (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">min(x)</span></code></p></td>
<td class="text-align:left"><p>Minimum of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">max(x)</span></code></p></td>
<td class="text-align:left"><p>Maximum of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">sum(x)</span></code></p></td>
<td class="text-align:left"><p>Sum all elements of (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">summary(x)</span></code></p></td>
<td class="text-align:left"><p>Summary statistics for (a vector or matrix) <code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sets">
<h4>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Function</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">union(x,</span> <span class="pre">y)</span></code></p></td>
<td class="text-align:left"><p>Union of all elements of two vectors x &amp; y</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">intersect(x,</span> <span class="pre">y)</span></code></p></td>
<td class="text-align:left"><p>Elements common to two vectors x &amp; y</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">setdiff(x,</span> <span class="pre">y)</span></code></p></td>
<td class="text-align:left"><p>Elements unique to two vectors x &amp; y</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">setequal(x,</span> <span class="pre">y)</span></code></p></td>
<td class="text-align:left"><p>Check if two vectors x &amp; y are the same set (have same unique elements)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">element(x,</span> <span class="pre">y)</span></code></p></td>
<td class="text-align:left"><p>Check if an element x is in vector y</p></td>
</tr>
</tbody>
</table>
<p><em>Try out these commands in your R console by generating the appropriate data</em></p>
</div>
</div>
<div class="section" id="generating-random-numbers">
<h3>Generating Random Numbers<a class="headerlink" href="#generating-random-numbers" title="Permalink to this headline">¶</a></h3>
<p>You will probably need to generate random numbers at some point as a quantitative biologist.</p>
<p>R has many routines for generating random samples from various probability distributions. There are a number of random number distributions that you can sample or generate random numbers from:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Function</p></th>
<th class="text-align:left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">rnorm(10,</span> <span class="pre">m=0,</span> <span class="pre">sd=1)</span></code></p></td>
<td class="text-align:left"><p>Draw 10 normal random numbers with mean=0 and standard deviation = 1</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">dnorm(x,</span> <span class="pre">m=0,</span> <span class="pre">sd=1)</span></code></p></td>
<td class="text-align:left"><p>Density function</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">qnorm(x,</span> <span class="pre">m=0,</span> <span class="pre">sd=1)</span></code></p></td>
<td class="text-align:left"><p>Cumulative density function</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">runif(20,</span> <span class="pre">min=0,</span> <span class="pre">max=2)</span></code></p></td>
<td class="text-align:left"><p>Twenty random numbers from uniform <code class="docutils literal notranslate"><span class="pre">[0,2]</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p><code class="docutils literal notranslate"> <span class="pre">rpois(20,</span> <span class="pre">lambda=10)</span></code></p></td>
<td class="text-align:left"><p>Twenty random numbers from Poisson (with mean <span class="math notranslate nohighlight">\(\lambda\)</span>)</p></td>
</tr>
</tbody>
</table>
<div class="section" id="seeding-random-number-generators">
<h4>“Seeding” random number generators<a class="headerlink" href="#seeding-random-number-generators" title="Permalink to this headline">¶</a></h4>
<p>Before proceeding further, note that computers <em>can’t</em> generate <em>true</em> mathematically random numbers. This may seem surprising, but basically a computer cannot be programmed to do things purely by chance; it can only follow given instructions blindly and is therefore completely predictable. Instead, computers have algorithms called “pseudo-random number generators” that generate <em>practically random</em> sequences of numbers. These are typically based on a iterative formula that generates a sequence of random numbers, starting with a first number called the “<strong>seed</strong>”. This sequence is completely “deterministic”, that is, starting with a particular seed yields exactly the same sequence of pseudo-random numbers every time you re-run the generator.</p>
<p>Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">1234567</span><span class="p">)</span>
<span class="nf">rnorm</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">0.156703769128359</div></div>
</div>
<p>Everybody in the class  will get the same answer!</p>
<p>Now try and compare the results with your neighbor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1.37381119149164</li>
	<li>0.73067024376365</li>
	<li>-1.35080092669852</li>
	<li>-0.00851496085595985</li>
	<li>0.320981862836429</li>
	<li>-1.77814840855737</li>
	<li>0.909503835073888</li>
	<li>-0.919404336160487</li>
	<li>-0.157714830888067</li>
	<li>1.10199738945752</li>
</ol>
</div></div>
</div>
<p>And then the whole sequence of 11 numbers you generated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">1234567</span><span class="p">)</span>
<span class="nf">rnorm</span><span class="p">(</span><span class="m">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>0.156703769128359</li>
	<li>1.37381119149164</li>
	<li>0.73067024376365</li>
	<li>-1.35080092669852</li>
	<li>-0.00851496085595985</li>
	<li>0.320981862836429</li>
	<li>-1.77814840855737</li>
	<li>0.909503835073888</li>
	<li>-0.919404336160487</li>
	<li>-0.157714830888067</li>
	<li>1.10199738945752</li>
</ol>
</div></div>
</div>
<p>Thus, setting the seed allows you to reliably generate the identical sequence of “random” numbers. These numbers are not truly random, but have the properties of random numbers. Note also that pseudo-random number generators are periodic, which means that the sequence will eventually repeat itself. However, this  period is so long that it can be ignored for most practical purposes. So effectively, <code class="docutils literal notranslate"> <span class="pre">rnorm</span></code> has an enormous list that it cycles through. The random seed starts the process, i.e., indicates where in the list to start. This is usually taken from the clock when you start R.</p>
<p>But why bother with randiom number seeds? Setting a particular seed can be useful when debugging programs (coming up below). Bugs in code can be hard to find — harder still if you are generating random numbers, so repeat runs of your code may or may not all trigger the same behaviour. You can set the seed once at the beginning of the code — ensuring repeatability, retaining (pseudo) randomness. Once  debugged, if you want, you can remove the set seed line.</p>
</div>
</div>
</div>
<div class="section" id="your-analysis-workflow">
<h2>Your analysis workflow<a class="headerlink" href="#your-analysis-workflow" title="Permalink to this headline">¶</a></h2>
<p>In using R for an analysis, you will likely use and create several files. As in the case of bash and Python based projects, in R projects as well, you should keep your workflow well organized. For example, it is sensible to create a folder (directory) to keep all code files together. You can then set R to work from this directory, so that files are easy to find and run — this will be your “working directory” (more on this below). Also, you don’t want to mix code files with data and results files. So you should create separate directories for these as well. Thus, your typical <code class="docutils literal notranslate"><span class="pre">R</span></code> analysis workflow will be:</p>
<hr class="docutils" />
<p><img alt="image" src="../_images/RWorkFlow.png" />
<small><center>Your R project. Keep it neat and organized!</p>
</center></small>
<hr class="docutils" />
<p>Some details on each kind of file:</p>
<ul class="simple">
<li><p><em>R script files</em>: These are plain text files containing all the R code needed for an analysis. These should  be created with a text editor, typically part of some smart code editor like vscode, or RStudio, and saved with the extension <code class="docutils literal notranslate"><span class="pre">*.R</span></code>. You should <em>never</em> use Word to save or edit these files as R can only read code from plain text files.</p></li>
<li><p><em>Text data files</em> These are files of data in plain text format containing one or more columns of data (numbers, strings, or both). Although there are several format options, we will typically be using <code class="docutils literal notranslate"><span class="pre">csv</span></code> files, where the data entries are separated by commas. These are easy to create and export from Excel (if that’s what you use…).</p></li>
<li><p><em>Results output files</em> These are a plain text files containing your results, such the the summary of output of a regression or ANOVA analysis. Typically, you will output your results in a table format where the columns are separated by commas (csv) or tabs (tab-delimited).</p></li>
<li><p><em>Graphics files</em> R can export graphics in a wide range of formats. This can be done automatically from R code and we will look at this later but you can also select a graphics window (e.g., in RStudio) and click <code class="docutils literal notranslate"><span class="pre">File</span></code> <span class="math notranslate nohighlight">\(\triangleright\)</span> <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">as...</span></code>.</p></li>
<li><p><em>Rdata files</em> You can save any data loaded or created in R, including outputs of statistical analyses and other things, into a single<code class="docutils literal notranslate"><span class="pre">Rdata</span></code> file. These are not plain text and can only be read by R, but can hold all the data from an analysis in a single handy location. We will not use these much in this course.</p></li>
</ul>
<p>So let’s build your R analysis project structure.</p>
<p>Do the following:</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Create a sensibly named directory (e.g., <code class="docutils literal notranslate"><span class="pre">MyRCoursework</span></code>, <code class="docutils literal notranslate"> <span class="pre">week3</span></code>, etc in an appropriate location on your computer. If you are using a college Windows computer, you may need to create it in your <code class="docutils literal notranslate"><span class="pre">H:</span></code> drive. Avoid including spaces in your file or directory names, as this will often create problems when you share your file or directory with somebody else. Many software programs do not handle spaces in file/directory names well. Use underscores instead of spaces. For example, instead of <code class="docutils literal notranslate"> <span class="pre">My</span> <span class="pre">R</span> <span class="pre">Coursework</span></code>, use <code class="docutils literal notranslate"> <span class="pre">My_R_Coursework</span></code> or <code class="docutils literal notranslate"> <span class="pre">MyRCoursework</span></code>.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Create subdirectories <em>within this directory</em> called <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code>, and <code class="docutils literal notranslate"><span class="pre">results</span></code>. Remember,  commands in all programming languages are case-sensitive when it comes to reading directory path names, so <code class="docutils literal notranslate"><span class="pre">code</span></code> is not the same as <code class="docutils literal notranslate"><span class="pre">Code</span></code>!</p>
<p>You can create directories using <code class="docutils literal notranslate"><span class="pre">dir.create()</span></code>within R (or if on Mac/Linux, with the usual <code class="docutils literal notranslate"><span class="pre">mkdir</span></code> from the bash terminal):</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">dir.create</span><span class="p">(</span><span class="s">&quot;MyRCoursework&quot;</span><span class="p">)</span>
<span class="nf">dir.create</span><span class="p">(</span><span class="s">&quot;MyRCoursework/code&quot;</span><span class="p">)</span>
<span class="nf">dir.create</span><span class="p">(</span><span class="s">&quot;MyRCoursework/data&quot;</span><span class="p">)</span>	
<span class="nf">dir.create</span><span class="p">(</span><span class="s">&quot;MyRCoursework/results&quot;</span><span class="p">)</span>	
</pre></div>
</div>
<div class="section" id="the-r-workspace-and-working-directory">
<h3>The R Workspace and Working Directory<a class="headerlink" href="#the-r-workspace-and-working-directory" title="Permalink to this headline">¶</a></h3>
<p>R has a “workspace” – a current working environment that includes any user-defined data structures objects (vectors, matrices, data frames, lists) as well as other objects (e.g., functions). At the end of an R session, the user can save an image of the current workspace that is automatically reloaded the next time R is started. Your
workspace is saved in your “Working Directory”, which has to be set manually.</p>
<p>So before we go any further, let’s get sort out where your R “Working Directory” should be and how you should set it. R has a default location where it assumes your working directory is.</p>
<ul class="simple">
<li><p>in Windows, it is <code class="docutils literal notranslate"> <span class="pre">C:/Windows/system32</span></code>or similar.</p></li>
<li><p>in Mac, it is <code class="docutils literal notranslate"> <span class="pre">/User/YourUserName</span></code> or similar.</p></li>
<li><p>In UNIX/Linux, it is whichever directory you are in when you launch R.</p></li>
</ul>
<p>To see where your current working directory is, at the R command prompt, type:</p>
<p><code class="docutils literal notranslate"><span class="pre">getwd()</span></code></p>
<p>This tells you what the current <code class="docutils literal notranslate"><span class="pre">w</span></code>orking <code class="docutils literal notranslate"><span class="pre">d</span></code>irectory is.</p>
<p>Now, set the working directory to be <code class="docutils literal notranslate"> <span class="pre">MrRCourseworkcode</span></code>. For example, if you created <code class="docutils literal notranslate"> <span class="pre">MrRCoursework</span></code>directly in your <code class="docutils literal notranslate"><span class="pre">H:\</span></code>, the you would use:</p>
<p><code class="docutils literal notranslate"><span class="pre">setwd(&quot;H:/MrRCourseworkcode&quot;)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">dir()</span></code> #check what’s in the current working directory</p>
<p>On your own computer, you can also change R’s default to a particular working directory where you would like to start (easily done in RStudio):</p>
<ul>
<li><p>In Linux, you can do this by editing the <code class="docutils literal notranslate"><span class="pre">Rprofile.site</span></code>site with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">gedit</span> <span class="pre">/etc/R/Rprofile.site</span></code>. In that file, you would add your start-up parameters between the lines</p>
<p><code class="docutils literal notranslate"><span class="pre">.First</span> <span class="pre">&lt;-</span> <span class="pre">function()</span> <span class="pre">cat(&quot;\n</span> <span class="pre">Welcome</span> <span class="pre">to</span> <span class="pre">R!\n\n&quot;)</span></code></p>
</li>
</ul>
<p>and</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>`.Last &lt;- function() cat(&quot;\n   Goodbye! \n\n&quot;)`.
</pre></div>
</div>
<p>Between these two lines, insert:
<code class="docutils literal notranslate"><span class="pre">setwd(&quot;/home/YourName/YourDirectoryPath&quot;)</span></code></p>
<ul class="simple">
<li><p>In Windows and Macs, you can find the <code class="docutils literal notranslate"> <span class="pre">Rprofile.site</span></code>file by searching for it. On Windows, it should be at <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\R\R-x.x.x\etc</span></code> directory, where <code class="docutils literal notranslate"><span class="pre">x.x.x</span></code> is your R version.</p></li>
<li><p>If you are using RStudio, you can change the default working directory through the RStudio “Options” dialog.</p></li>
</ul>
</div>
</div>
<div class="section" id="importing-and-exporting-data">
<h2>Importing and Exporting Data<a class="headerlink" href="#importing-and-exporting-data" title="Permalink to this headline">¶</a></h2>
<p>We are now ready to see how to import and export data in R, typically the first step of your analysis. The best option is to have your data in a <code class="docutils literal notranslate"> <span class="pre">c</span></code>omma <code class="docutils literal notranslate"> <span class="pre">s</span></code>eparated <code class="docutils literal notranslate"> <span class="pre">v</span></code>alue (<code class="docutils literal notranslate"> <span class="pre">csv</span></code>) text file or in a tab separated text file. Then, you can use the function <code class="docutils literal notranslate"> <span class="pre">read.csv</span></code>(or <code class="docutils literal notranslate"> <span class="pre">read.table</span></code>) to import your data. Now, lets get some data into your <code class="docutils literal notranslate"> <span class="pre">Data</span></code>directory.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Go to the repository you downloaded from TheMulQuaBio, and navigate to the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.
<span class="math notranslate nohighlight">\(\star\)</span> Copy the file <code class="docutils literal notranslate"><span class="pre">trees.csv</span></code>into your own <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
<p>Now, try the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyData</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;../data/trees.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ls</span><span class="p">()</span> <span class="c1">#Check that MyData has appeared </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'Data'</li>
	<li>'MyData'</li>
	<li>'Temperatures'</li>
	<li>'x'</li>
	<li>'Years'</li>
</ol>
</div></div>
</div>
<p>Your output may be somewhat different, depending on what what variables and other objects have been created in your R Workspace during the current R session. But the main thing is, you should be able to see a <code class="docutils literal notranslate"><span class="pre">MyData</span></code> in the list of objects printed.</p>
<p>Or you can have a more detailed look:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ls.str</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Data : &#39;data.frame&#39;:	360 obs. of  7 variables:
 $ Year  : int  1951 1951 1951 1951 1951 1951 1951 1951 1951 1951 ...
 $ Month : Factor w/ 12 levels &quot;Apr&quot;,&quot;Aug&quot;,&quot;Dec&quot;,..: 5 4 8 1 9 7 6 2 12 11 ...
 $ TimePt: int  1 2 3 4 5 6 7 8 9 10 ...
 $ NZS   : num  13.4 14.1 14.4 11.4 7.1 4.8 5.7 5.9 8.6 10.7 ...
 $ NZN   : num  19.7 19.4 19.3 16.9 13.2 10.8 11.4 10.8 13 14.7 ...
 $ NC    : num  26.4 26.5 24.9 23.3 20.8 20.1 19.3 19.6 20.2 22.2 ...
 $ PNG   : num  27.9 27.1 26.6 26.3 25.7 25.8 26.1 25.8 27.1 27.4 ...
MyData : &#39;data.frame&#39;:	120 obs. of  3 variables:
 $ Species      : Factor w/ 10 levels &quot;Alnus glutinosa&quot;,..: 9 10 6 5 2 2 9 4 10 10 ...
 $ Distance.m   : num  31.7 46 31.2 34.6 45.5 ...
 $ Angle.degrees: num  41.3 44.5 25.1 23.3 38.3 ...
Temperatures :  num [1:360] 13.4 14.1 14.4 11.4 7.1 4.8 5.7 5.9 8.6 10.7 ...
x :  int [1:360] 1 2 3 4 5 6 7 8 9 10 ...
Years :  int [1:360] 1951 1951 1951 1951 1951 1951 1951 1951 1951 1951 ...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">MyData</span><span class="p">)</span> <span class="c1"># Have a quick look at the data frame</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>Species</th><th scope=col>Distance.m</th><th scope=col>Angle.degrees</th></tr></thead>
<tbody>
	<tr><td>Populus tremula   </td><td>31.66583          </td><td>41.28264          </td></tr>
	<tr><td>Quercus robur     </td><td>45.98499          </td><td>44.53592          </td></tr>
	<tr><td>Ginkgo biloba     </td><td>31.24177          </td><td>25.14626          </td></tr>
	<tr><td>Fraxinus excelsior</td><td>34.61667          </td><td>23.33613          </td></tr>
	<tr><td>Betula pendula    </td><td>45.46617          </td><td>38.34913          </td></tr>
	<tr><td>Betula pendula    </td><td>48.79550          </td><td>33.59231          </td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str</span><span class="p">(</span><span class="n">MyData</span><span class="p">)</span> <span class="c1"># Have a quick look at the column types</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data.frame&#39;:	120 obs. of  3 variables:
 $ Species      : Factor w/ 10 levels &quot;Alnus glutinosa&quot;,..: 9 10 6 5 2 2 9 4 10 10 ...
 $ Distance.m   : num  31.7 46 31.2 34.6 45.5 ...
 $ Angle.degrees: num  41.3 44.5 25.1 23.3 38.3 ...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyData</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;../data/trees.csv&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> <span class="c1"># ignoring headers</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">MyData</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>V1</th><th scope=col>V2</th><th scope=col>V3</th></tr></thead>
<tbody>
	<tr><td>Species           </td><td>Distance.m        </td><td>Angle.degrees     </td></tr>
	<tr><td>Populus tremula   </td><td>31.6658337740228  </td><td>41.2826361937914  </td></tr>
	<tr><td>Quercus robur     </td><td>45.984992608428   </td><td>44.5359166583512  </td></tr>
	<tr><td>Ginkgo biloba     </td><td>31.2417666241527  </td><td>25.1462585572153  </td></tr>
	<tr><td>Fraxinus excelsior</td><td>34.6166691975668  </td><td>23.336126555223   </td></tr>
	<tr><td>Betula pendula    </td><td>45.4661654261872  </td><td>38.3491299510933  </td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Or you can load data using the more general <code class="docutils literal notranslate"><span class="pre">read.table</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyData</span> <span class="o">&lt;-</span> <span class="nf">read.table</span><span class="p">(</span><span class="s">&quot;../data/trees.csv&quot;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1">#another way</span>
</pre></div>
</div>
</div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">read.table</span></code> you need to specify whether there is a header row that needs to be imported as such.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">MyData</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>Species</th><th scope=col>Distance.m</th><th scope=col>Angle.degrees</th></tr></thead>
<tbody>
	<tr><td>Populus tremula   </td><td>31.66583          </td><td>41.28264          </td></tr>
	<tr><td>Quercus robur     </td><td>45.98499          </td><td>44.53592          </td></tr>
	<tr><td>Ginkgo biloba     </td><td>31.24177          </td><td>25.14626          </td></tr>
	<tr><td>Fraxinus excelsior</td><td>34.61667          </td><td>23.33613          </td></tr>
	<tr><td>Betula pendula    </td><td>45.46617          </td><td>38.34913          </td></tr>
	<tr><td>Betula pendula    </td><td>48.79550          </td><td>33.59231          </td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">MyData</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;../data/trees.csv&quot;</span><span class="p">,</span> <span class="n">skip</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span> <span class="c1"># skip first 5 lines</span>
</pre></div>
</div>
</div>
</div>
<p>Note that the resulting <code class="docutils literal notranslate"><span class="pre">MyData</span></code>in your workspace is a R dataframe. Also, note the UNIX-like paths using forward slashes (Windows uses back slashes).</p>
<hr class="docutils" />
<blockquote>
<div><p>If you are using a computer from elsewhere in the EU, Excel may use a comma (e.g., <span class="math notranslate nohighlight">\(\pi=3,1416\)</span>) instead of a decimal point (<span class="math notranslate nohighlight">\(\pi=3.1416\)</span>). In this case, <code class="docutils literal notranslate"><span class="pre">csv</span></code>files may use a semi-colon to separate columns and you can use the alternative function <code class="docutils literal notranslate"><span class="pre">read.csv2()</span></code> to read them into the R workspace.</p>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="relative-paths">
<h3>Relative paths<a class="headerlink" href="#relative-paths" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">../</span></code> in <code class="docutils literal notranslate"><span class="pre">read.csv(&quot;../data/trees.csv&quot;)</span></code> above signifies a “relative” path. That is, you are asking R to load data that lies in a different directory (folder) relative your current location (in this case, you are in your <code class="docutils literal notranslate"> <span class="pre">Code</span></code>directory). In other, more technical words, <code class="docutils literal notranslate"><span class="pre">../data/trees.txt</span></code>points to a file named <code class="docutils literal notranslate"><span class="pre">trees.txt</span></code>located in the “parent” of the current directory.</p>
<p><em>What is an absolute path?</em> — one that specifies the whole path on your computer, say from <code class="docutils literal notranslate"> <span class="pre">C:\</span></code>”upwards” on Windows, <code class="docutils literal notranslate"><span class="pre">/Users/</span></code> upwards on Mac, and <code class="docutils literal notranslate"><span class="pre">/home/</span></code> upwards on Linux. Absolute paths are specific to each computer, so should be avoided. So to import data and export results, your script should <em>not</em> use absolute paths. Also, <em>AVOID putting a <code class="docutils literal notranslate"><span class="pre">setwd()</span></code>command at the start of your R script</em>, because setting the working directory requires an absolute directory path, which will differ across computers, platforms, and users. Let the end users set the working directory on their machine themselves.</p>
<p>Using relative paths in in your R scripts and code will make your code computer-independent and easier for others to use your code. The relative path way should always be the way you load data in your analyses scripts — it will guarantee that your analysis works on every computer, not just your own or college computer.</p>
</div>
<div class="section" id="writing-to-and-saving-files">
<h3>Writing to and saving files<a class="headerlink" href="#writing-to-and-saving-files" title="Permalink to this headline">¶</a></h3>
<p>You can also save your data frames using <code class="docutils literal notranslate"><span class="pre">write.table</span></code> or <code class="docutils literal notranslate"><span class="pre">write.csv</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">write.csv</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dir</span><span class="p">(</span><span class="s">&quot;../results/&quot;</span><span class="p">)</span> <span class="c1"># Check if it worked</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'LV_model.pdf'</li>
	<li>'MyData.csv'</li>
	<li>'MyFirst-ggplot2-Figure.pdf'</li>
	<li>'MyResults.Rout'</li>
	<li>'Pred_Prey_Overlay.pdf'</li>
	<li>'TreeHeight.csv'</li>
</ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">write.table</span><span class="p">(</span><span class="n">MyData</span><span class="p">[</span><span class="m">1</span><span class="p">,],</span> <span class="n">file</span> <span class="o">=</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># append</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message in write.table(MyData[1, ], file = &quot;../results/MyData.csv&quot;, append = TRUE):
“appending column names to file”
</pre></div>
</div>
</div>
</div>
<p>You get a warning with here because R thinks it is strange that you are appending headers to a file that already has headers!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">write.csv</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span> <span class="n">row.names</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># write row names</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">write.table</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span> <span class="n">col.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span> <span class="c1"># ignore col names</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="writing-r-code">
<h2>Writing R code<a class="headerlink" href="#writing-r-code" title="Permalink to this headline">¶</a></h2>
<p>Typing in commands interactively in the R console is good for starters, but you will want to switch to putting your sequence of commands into a script file, and then ask R to run those commands.</p>
<ul class="simple">
<li><p>Open a new text file, call it <code class="docutils literal notranslate"><span class="pre">basic_io.R</span></code>, and save it to your <code class="docutils literal notranslate"><span class="pre">code</span></code>directory.</p></li>
<li><p>Write the above input-output commands in it:</p></li>
</ul>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># A simple script to illustrate R input-output.  </span>
<span class="c1"># Run line by line and check inputs outputs to understand what is happening  </span>

<span class="n">MyData</span> <span class="o">&lt;-</span> <span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;../data/trees.csv&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># import with headers</span>

<span class="nf">write.csv</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">)</span> <span class="c1">#write it out as a new file</span>

<span class="nf">write.table</span><span class="p">(</span><span class="n">MyData</span><span class="p">[</span><span class="m">1</span><span class="p">,],</span> <span class="n">file</span> <span class="o">=</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># Append to it</span>

<span class="nf">write.csv</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span> <span class="n">row.names</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># write row names</span>

<span class="nf">write.table</span><span class="p">(</span><span class="n">MyData</span><span class="p">,</span> <span class="s">&quot;../results/MyData.csv&quot;</span><span class="p">,</span> <span class="n">col.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span> <span class="c1"># ignore column names</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Now place the cursor on the first line of code in the script file and run it by pressing the appropriate keyboard shortcut (e.g., PC: ctrl+R, Mac: command+enter, Linux: ctrl+enter are the usual shortcuts for doing this).</p></li>
<li><p>Check after every line that you are getting the expected result.</p></li>
</ul>
</div>
<div class="section" id="running-r-code">
<h2>Running R code<a class="headerlink" href="#running-r-code" title="Permalink to this headline">¶</a></h2>
<p>But even writing to a script file and running the code line-by-line or block-by-block is not your ultimate goal. What you would really like to do is to just run your full analysis and output all the results. There are two main approaches for running R script/code.</p>
<div class="section" id="using-source">
<h3>Using <code class="docutils literal notranslate"><span class="pre">source</span></code><a class="headerlink" href="#using-source" title="Permalink to this headline">¶</a></h3>
<p>You can run all the contents of a <code class="docutils literal notranslate"><span class="pre">*.R</span></code>script file from the <code class="docutils literal notranslate"><span class="pre">R</span></code> command line by using <code class="docutils literal notranslate"><span class="pre">source()</span></code>.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Try sourcing <code class="docutils literal notranslate"><span class="pre">basic_io.R</span></code> (you will need to make sure you have <code class="docutils literal notranslate"><span class="pre">setwd</span></code> to your code directory):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">source</span><span class="p">(</span><span class="s">&quot;basic_io.R&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message in write.table(MyData[1, ], file = &quot;../results/MyData.csv&quot;, append = TRUE):
“appending column names to file”
</pre></div>
</div>
</div>
</div>
<p>That has run OK, warning and all.</p>
<ul class="simple">
<li><p>If you get errors, read and then try to fix them. The most common problem is likely to be that you have not <code class="docutils literal notranslate"><span class="pre">setwd()</span></code> to the <code class="docutils literal notranslate"><span class="pre">code</span></code> directory.</p></li>
</ul>
<p>Alternatively, you can run the script from wherever (e.g., <code class="docutils literal notranslate"><span class="pre">data</span></code> directory) by adding the directory path to the script file name, if the script file is not in your working directory and you don’t want to change your working directory. For example, you will need <code class="docutils literal notranslate"><span class="pre">source(&quot;../code/control.R</span></code> if your working directory is <code class="docutils literal notranslate"><span class="pre">data</span></code> and not <code class="docutils literal notranslate"><span class="pre">code</span></code> (using a relative path).</p>
<p><em>Do not</em> put a <code class="docutils literal notranslate"> <span class="pre">source()</span></code>command inside the script file you are sourcing, as it is then trying to run itself again and again and that’s just cruel!*</p>
<hr class="docutils" />
<blockquote>
<div><p>The command <code class="docutils literal notranslate"> <span class="pre">source()</span></code>has a <code class="docutils literal notranslate"><span class="pre">chdir</span></code>argument whose default value is FALSE. When set to TRUE, it will change the working directory to the directory of the file being sourced.</p>
</div></blockquote>
<hr class="docutils" />
<p>Also, if you have <code class="docutils literal notranslate"><span class="pre">source</span></code>ed a script successfully, you will see no output on in R console/terminal unless there was an error or warning, or if you explicitly asked for something to be printed. So it can be useful to add a line at the end of the script saying something like <code class="docutils literal notranslate"><span class="pre">print(&quot;Script</span> <span class="pre">complete!&quot;)</span></code>.</p>
</div>
<div class="section" id="using-rscript">
<h3>Using <code class="docutils literal notranslate"> <span class="pre">Rscript</span></code><a class="headerlink" href="#using-rscript" title="Permalink to this headline">¶</a></h3>
<p>You can also run R script from the UNIX/Linux terminal by calling <code class="docutils literal notranslate"><span class="pre">Rscript</span></code>. That is, while you have to be inside an R session to use the <code class="docutils literal notranslate"> <span class="pre">source</span></code> command to run a script, you can run a R script directly from the UNIX/Linux terminal by calling <code class="docutils literal notranslate"><span class="pre">Rscript</span></code>.</p>
<p>This allows you to easily automate execution of your R scripts (e.g., by writing a bash script) and integrate R into a bigger computing pipeline/workflow by calling it through other tools or languages (e.g., see the <a class="reference internal" href="06-Python_II.html"><span class="doc std std-doc">Python Chapter II</span></a>).</p>
<p>If you are on Linux, try using <code class="docutils literal notranslate"><span class="pre">Rscript</span></code> to run <code class="docutils literal notranslate"><span class="pre">basic_io.R</span></code>:</p>
<ul class="simple">
<li><p>Exit from the R console using <code class="docutils literal notranslate"><span class="pre">ctrl+D</span></code>, or open a new bash terminal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span></code> to the location of <code class="docutils literal notranslate"> <span class="pre">basic_io.R</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">week3/code</span></code>)</p></li>
<li><p>Then run the script using <code class="docutils literal notranslate"><span class="pre">Rscript</span> <span class="pre">basic_io.R</span></code></p></li>
</ul>
<p>Also, please have a look at <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">Rscript</span></code> in a bash terminal.</p>
</div>
<div class="section" id="running-r-in-batch-mode">
<h3>Running R in batch mode<a class="headerlink" href="#running-r-in-batch-mode" title="Permalink to this headline">¶</a></h3>
<p>In addition to <code class="docutils literal notranslate"> <span class="pre">Rscript</span></code>, there is another way to run you R script without opening the R console. In Mac or Linux, you can do so by typing:</p>
<p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">BATCH</span> <span class="pre">MyCode.R</span> <span class="pre">MyResults.Rout</span></code></p>
<p>This will create an <code class="docutils literal notranslate"><span class="pre">MyResults.Rout</span></code>file containing all the output. On Microsoft Windows, it’s more complicated — change the path to <code class="docutils literal notranslate"><span class="pre">R.exe</span></code>and output file as needed:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;C:\Program</span> <span class="pre">Files\R\R-3.x.x\bin\R.exe&quot;</span> <span class="pre">CMD</span> <span class="pre">BATCH</span> <span class="pre">-vanilla</span> <span class="pre">-slave</span> <span class="pre">&quot;C:\PathToMyResults\Results\MyCode.R&quot;</span></code></p>
<p>Here, replace 3.x.x with the R version you have.</p>
</div>
</div>
<div class="section" id="control-flow-tools">
<h2>Control flow tools<a class="headerlink" href="#control-flow-tools" title="Permalink to this headline">¶</a></h2>
<p>In R, you can write <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">then</span></code>, <code class="docutils literal notranslate"><span class="pre">else</span></code> statements, and <code class="docutils literal notranslate"><span class="pre">for</span></code> and <code class="docutils literal notranslate"><span class="pre">while</span></code> loops like any programming language to give you finer control over your program’s “control flow”. Such statements are useful to include in functions and scripts because you may only want to do certain calculations or other tasks, under certain conditions (e.g., <code class="docutils literal notranslate"> <span class="pre">if</span></code> the dataset is from a particular year, do something different).</p>
<p>Let’s look at some examples of code exemplifying control flow tools in R.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type each of the following blocks of code in a script file called <code class="docutils literal notranslate"><span class="pre">control_flow.R</span></code> and save it in your <code class="docutils literal notranslate"><span class="pre">code</span></code> directory. then run each block <em>separately</em> by sending or pasting into the R console.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## If statement</span>
<span class="n">a</span> <span class="o">&lt;-</span> <span class="kc">TRUE</span>
<span class="nf">if </span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="kc">TRUE</span><span class="p">){</span>
	<span class="nf">print </span><span class="p">(</span><span class="s">&quot;a is TRUE&quot;</span><span class="p">)</span>
	<span class="p">}</span> <span class="n">else</span> <span class="p">{</span>
	<span class="nf">print </span><span class="p">(</span><span class="s">&quot;a is FALSE&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;a is TRUE&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## If statement on a single line</span>
<span class="n">z</span> <span class="o">&lt;-</span> <span class="nf">runif</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="c1">## uniformly distributed random number</span>
<span class="nf">if </span><span class="p">(</span><span class="n">z</span> <span class="o">&lt;=</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">{</span><span class="nf">print </span><span class="p">(</span><span class="s">&quot;Less than a half&quot;</span><span class="p">)}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Less than a half&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## For loop using a sequence</span>
<span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">){</span>
	<span class="n">j</span> <span class="o">&lt;-</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span>
	<span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&quot; squared is&quot;</span><span class="p">,</span> <span class="n">j</span> <span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;1  squared is 1&quot;
[1] &quot;2  squared is 4&quot;
[1] &quot;3  squared is 9&quot;
[1] &quot;4  squared is 16&quot;
[1] &quot;5  squared is 25&quot;
[1] &quot;6  squared is 36&quot;
[1] &quot;7  squared is 49&quot;
[1] &quot;8  squared is 64&quot;
[1] &quot;9  squared is 81&quot;
[1] &quot;10  squared is 100&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## For loop over vector of strings</span>
<span class="nf">for</span><span class="p">(</span><span class="n">species</span> <span class="n">in</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;Heliodoxa rubinoides&#39;</span><span class="p">,</span> 
                 <span class="s">&#39;Boissonneaua jardini&#39;</span><span class="p">,</span> 
                 <span class="s">&#39;Sula nebouxii&#39;</span><span class="p">)){</span>
  <span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;The species is&#39;</span><span class="p">,</span> <span class="n">species</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;The species is Heliodoxa rubinoides&quot;
[1] &quot;The species is Boissonneaua jardini&quot;
[1] &quot;The species is Sula nebouxii&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## for loop using a vector</span>
<span class="n">v1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;bc&quot;</span><span class="p">,</span><span class="s">&quot;def&quot;</span><span class="p">)</span>
<span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">v1</span><span class="p">){</span>
	<span class="nf">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;a&quot;
[1] &quot;bc&quot;
[1] &quot;def&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## While loop</span>
<span class="n">i</span> <span class="o">&lt;-</span> <span class="m">0</span>
<span class="nf">while </span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="m">10</span><span class="p">){</span>
	<span class="n">i</span> <span class="o">&lt;-</span> <span class="n">i</span><span class="m">+1</span>
	<span class="nf">print</span><span class="p">(</span><span class="n">i</span><span class="o">^</span><span class="m">2</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] 1
[1] 4
[1] 9
[1] 16
[1] 25
[1] 36
[1] 49
[1] 64
[1] 81
[1] 100
</pre></div>
</div>
</div>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Now test <code class="docutils literal notranslate"><span class="pre">control_flow.R</span></code>. That is, run the script file  using <code class="docutils literal notranslate"><span class="pre">source</span></code> (and <code class="docutils literal notranslate"><span class="pre">Rscript</span></code> if on Linux).</p>
<p>If you get errors, read them carefully and fix them (OK, I am going to stop saying this henceforth!).</p>
<p>Here’s some more</p>
<div class="section" id="some-more-control-flow-tools">
<h3>Some more control flow tools<a class="headerlink" href="#some-more-control-flow-tools" title="Permalink to this headline">¶</a></h3>
<p>Let’s look at some more control tools that are less commonly used, but can be useful in certain scenarios.</p>
<div class="section" id="breaking-out-of-loops">
<h4><code class="docutils literal notranslate"><span class="pre">break</span></code>ing out of loops<a class="headerlink" href="#breaking-out-of-loops" title="Permalink to this headline">¶</a></h4>
<p>Often it is useful (or necessary) to <code class="docutils literal notranslate"><span class="pre">break</span></code> out of a loop when some condition is met. Use <code class="docutils literal notranslate"> <span class="pre">break</span></code> (like in pretty much any other programming language, like <code class="docutils literal notranslate"><span class="pre">python</span></code>) in situations when you cannot set a target number of iterations and would like to stop the loop execultion once some condition is met (as you would with a <code class="docutils literal notranslate"> <span class="pre">while</span></code> loop).</p>
<p>Try this (type into <code class="docutils literal notranslate"><span class="pre">break.R</span></code> and save in <code class="docutils literal notranslate"><span class="pre">code</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">&lt;-</span> <span class="m">0</span> <span class="c1">#Initialize i</span>
	<span class="nf">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="kc">Inf</span><span class="p">)</span> <span class="p">{</span>
		<span class="nf">if </span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="m">10</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">break</span> 
             <span class="p">}</span> <span class="c1"># Break out of the while loop! </span>
		<span class="n">else</span> <span class="p">{</span> 
			<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;i equals &quot;</span> <span class="p">,</span> <span class="n">i</span> <span class="p">,</span> <span class="s">&quot; \n&quot;</span><span class="p">)</span>
			<span class="n">i</span> <span class="o">&lt;-</span> <span class="n">i</span> <span class="o">+</span> <span class="m">1</span> <span class="c1"># Update i</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>i equals  0  
i equals  1  
i equals  2  
i equals  3  
i equals  4  
i equals  5  
i equals  6  
i equals  7  
i equals  8  
i equals  9  
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="using-next">
<h4>Using <code class="docutils literal notranslate"><span class="pre">next</span></code><a class="headerlink" href="#using-next" title="Permalink to this headline">¶</a></h4>
<p>You can also skip to next iteration of a loop. Both <code class="docutils literal notranslate"><span class="pre">next</span></code> and {\tt break} can be used within other loops (<code class="docutils literal notranslate"> <span class="pre">while</span></code>, <code class="docutils literal notranslate"> <span class="pre">for</span></code>). Try this (type into <code class="docutils literal notranslate"><span class="pre">next.R</span></code> and save in <code class="docutils literal notranslate"><span class="pre">code</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">if </span><span class="p">((</span><span class="n">i</span> <span class="o">%%</span> <span class="m">2</span><span class="p">)</span> <span class="o">==</span> <span class="m">0</span><span class="p">)</span> 
    <span class="n">next</span> <span class="c1"># pass to next iteration of loop </span>
  <span class="nf">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] 1
[1] 3
[1] 5
[1] 7
[1] 9
</pre></div>
</div>
</div>
</div>
<p>This code checks if a number is odd using the “modulo” operation and prints it if it is.</p>
<p><strong>Reminder</strong>: Indent your code as you would in Python scripts! Indentation helps you see the flow of the logic, rather than flattened version, which is hard for you and everybody else to read. I recommend using the TAB key to indent.</p>
</div>
</div>
</div>
<div class="section" id="writing-r-functions">
<h2>Writing R Functions<a class="headerlink" href="#writing-r-functions" title="Permalink to this headline">¶</a></h2>
<p>A function is a block of re-useable code that takes an input, does something with it (or to it!), and returns the result. Like any other programming language, R lets you write your own functions. All the “commands” that you have been using, such as <code class="docutils literal notranslate"> <span class="pre">ls()</span></code>, <code class="docutils literal notranslate"><span class="pre">mean()</span></code>, <code class="docutils literal notranslate"><span class="pre">c()</span></code>, etc are basically functions. You will want to write your own function for every scenario where a particular task or set of analysis steps need to be performed again and again.</p>
<p>The syntax for R functions is quite simple, with each function accepting “arguments” and “returning” a value.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the following into a script file called  <code class="docutils literal notranslate"><span class="pre">boilerplate.R</span></code>and save it in your <code class="docutils literal notranslate"><span class="pre">code</span></code> directory:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># A boilerplate R script</span>

<span class="n">MyFunction</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">Arg1</span><span class="p">,</span> <span class="n">Arg2</span><span class="p">){</span>
  
  <span class="c1"># Statements involving Arg1, Arg2:</span>
  <span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Argument&quot;</span><span class="p">,</span> <span class="nf">as.character</span><span class="p">(</span><span class="n">Arg1</span><span class="p">),</span> <span class="s">&quot;is a&quot;</span><span class="p">,</span> <span class="nf">class</span><span class="p">(</span><span class="n">Arg1</span><span class="p">)))</span> <span class="c1"># print Arg1&#39;s type</span>
  <span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Argument&quot;</span><span class="p">,</span> <span class="nf">as.character</span><span class="p">(</span><span class="n">Arg2</span><span class="p">),</span> <span class="s">&quot;is a&quot;</span><span class="p">,</span> <span class="nf">class</span><span class="p">(</span><span class="n">Arg2</span><span class="p">)))</span> <span class="c1"># print Arg2&#39;s type</span>
    
  <span class="nf">return </span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">Arg1</span><span class="p">,</span> <span class="n">Arg2</span><span class="p">))</span> <span class="c1">#this is optional, but very useful</span>
<span class="p">}</span>

<span class="nf">MyFunction</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">)</span> <span class="c1">#test the function</span>
<span class="nf">MyFunction</span><span class="p">(</span><span class="s">&quot;Riki&quot;</span><span class="p">,</span><span class="s">&quot;Tiki&quot;</span><span class="p">)</span> <span class="c1">#A different test</span>
</pre></div>
</div>
<p>Note the curly brackets – these are necessary for R to know where the specification of the function starts and ends. Also, note the indentation. Not necessary (unlike Python), but recommended to make the code more readable.</p>
<p>Now enter the R console and source the script:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">source</span><span class="p">(</span><span class="s">&quot;boilerplate.R&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Argument 1 is a numeric&quot;
[1] &quot;Argument 2 is a numeric&quot;
[1] &quot;Argument Riki is a character&quot;
[1] &quot;Argument Tiki is a character&quot;
</pre></div>
</div>
</div>
</div>
<p>This will run the script, and also save your function <code class="docutils literal notranslate"><span class="pre">MyFunction</span></code> as an object into your workspace (try <code class="docutils literal notranslate"><span class="pre">ls()</span></code>, and you will see <code class="docutils literal notranslate"><span class="pre">MyFunction</span></code> appear in the list of objects):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ls</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>'a'</li>
	<li>'Data'</li>
	<li>'i'</li>
	<li>'j'</li>
	<li>'MyData'</li>
	<li>'myexperiment'</li>
	<li>'MyFunction'</li>
	<li>'species'</li>
	<li>'Temperatures'</li>
	<li>'v1'</li>
	<li>'x'</li>
	<li>'Years'</li>
	<li>'z'</li>
</ol>
</div></div>
</div>
<p>Again, you output will likely be a bit different as you have been different things in your R workspace/session than I have. What matters is that you see <code class="docutils literal notranslate"><span class="pre">MyFunction</span></code> in the list of objects above.</p>
<p>Now try:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">MyFunction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'function'</div></div>
</div>
<p>So, yes, <code class="docutils literal notranslate"><span class="pre">MyFunction</span></code>is a <code class="docutils literal notranslate"><span class="pre">function</span></code> object!</p>
<p>Here are some examples of functions with conditionals:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Is the integer even?</span>
<span class="n">is.even</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">2</span><span class="p">){</span>
  <span class="nf">if </span><span class="p">(</span><span class="n">n</span> <span class="o">%%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">0</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is even!&#39;</span><span class="p">))</span>
  <span class="p">}</span> 
  <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is odd!&#39;</span><span class="p">))</span>
<span class="p">}</span>
<span class="nf">is.even</span><span class="p">(</span><span class="m">6</span><span class="p">)</span>

<span class="c1"># Is the number a power of 2?</span>
<span class="n">is.power2</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">2</span><span class="p">){</span>
  <span class="nf">if </span><span class="p">(</span><span class="nf">log2</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">%%</span> <span class="m">1</span><span class="o">==</span><span class="m">0</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s">&#39;is a power of 2!&#39;</span><span class="p">))</span>
  <span class="p">}</span> 
  <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is not a power of 2!&#39;</span><span class="p">))</span>
<span class="p">}</span>
<span class="nf">is.power2</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>

<span class="c1"># Is it a prime number?</span>
<span class="n">is.prime</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">n</span><span class="p">){</span>
  <span class="nf">if </span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="m">0</span><span class="p">){</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is a zero!&#39;</span><span class="p">))</span>
  <span class="p">}</span>
  <span class="nf">if </span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="m">1</span><span class="p">){</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is just a unit!&#39;</span><span class="p">))</span>
  <span class="p">}</span>
  <span class="n">ints</span> <span class="o">&lt;-</span> <span class="m">2</span><span class="o">:</span><span class="p">(</span><span class="n">n</span><span class="m">-1</span><span class="p">)</span>
  <span class="nf">if </span><span class="p">(</span><span class="nf">all</span><span class="p">(</span><span class="n">n</span><span class="o">%%</span><span class="n">ints</span><span class="o">!=</span><span class="m">0</span><span class="p">)){</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is a prime!&#39;</span><span class="p">))</span>
  <span class="p">}</span> 
  <span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;is a composite!&#39;</span><span class="p">))</span>
<span class="p">}</span>
<span class="nf">is.prime</span><span class="p">(</span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'6 is even!'</div><div class="output text_html">'4 is a power of 2!'</div><div class="output text_html">'3 is a prime!'</div></div>
</div>
<p>Run this code in R block by block and check make sure you understand what each function is doing and how.</p>
<p>Now let’s write a script containing a more useful function:</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> In your text editor type the following in a file called <code class="docutils literal notranslate"><span class="pre">TreeHeight.R</span></code>, and save it in your <code class="docutils literal notranslate"><span class="pre">code</span></code>directory:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># This function calculates heights of trees given distance of each tree </span>
<span class="c1"># from its base and angle to its top, using  the trigonometric formula </span>
<span class="c1">#</span>
<span class="c1"># height = distance * tan(radians)</span>
<span class="c1">#</span>
<span class="c1"># ARGUMENTS</span>
<span class="c1"># degrees:   The angle of elevation of tree</span>
<span class="c1"># distance:  The distance from base of tree (e.g., meters)</span>
<span class="c1">#</span>
<span class="c1"># OUTPUT</span>
<span class="c1"># The heights of the tree, same units as &quot;distance&quot;</span>

<span class="n">TreeHeight</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="n">distance</span><span class="p">){</span>
  <span class="n">radians</span> <span class="o">&lt;-</span> <span class="n">degrees</span> <span class="o">*</span> <span class="kc">pi</span> <span class="o">/</span> <span class="m">180</span>
  <span class="n">height</span> <span class="o">&lt;-</span> <span class="n">distance</span> <span class="o">*</span> <span class="nf">tan</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>
  <span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Tree height is:&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
  
  <span class="nf">return </span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">TreeHeight</span><span class="p">(</span><span class="m">37</span><span class="p">,</span> <span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">TreeHeight.R</span></code> block by block and check what each line is doing.</p></li>
<li><p>Now test it using <code class="docutils literal notranslate"><span class="pre">source</span></code> and/or <code class="docutils literal notranslate"><span class="pre">Rscript</span></code>.</p></li>
</ul>
</div>
<div class="section" id="practicals">
<h2>Practicals<a class="headerlink" href="#practicals" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Modify the script <code class="docutils literal notranslate"><span class="pre">TreeHeight.R</span></code> so that it does the following:</p>
<ul class="simple">
<li><p>Loads <code class="docutils literal notranslate"><span class="pre">trees.csv</span></code> and calculates tree heights for all trees in the data. Note that the distances have been measured in meters. (Hint: use relative paths)).</p></li>
<li><p>Creates a csv output file called <code class="docutils literal notranslate"><span class="pre">TreeHts.csv</span></code> in <code class="docutils literal notranslate"><span class="pre">results</span></code>that contains the calculated tree heights along with the original data in the following format (only first two rows and headers shown):</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Species&quot;</span>,<span class="s2">&quot;Distance.m&quot;</span>,<span class="s2">&quot;Angle.degrees&quot;</span>,<span class="s2">&quot;Tree.Height.m&quot;</span>
<span class="s2">&quot;Populus tremula&quot;</span>,31.6658337740228,41.2826361937914,27.8021161438536
<span class="s2">&quot;Quercus robur&quot;</span>,45.984992608428,44.5359166583512,45.2460250644405
</pre></div>
</div>
</li>
</ol>
<p>This script should work using either <code class="docutils literal notranslate"><span class="pre">source</span></code> or <code class="docutils literal notranslate"><span class="pre">Rscript</span></code> in Linux.</p>
</div>
<div class="section" id="vectorization">
<h2>Vectorization<a class="headerlink" href="#vectorization" title="Permalink to this headline">¶</a></h2>
<p>R is very slow at cycling through a data structure such as a dataframe or matrix (e.g., by using a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop).</p>
<p>This is because R is a <em>high-level, interpreted computer language</em>. That is, when you execute a command in R, it needs to “read” and interpret the necessary code from scratch every single time the command is called. On the other hand, compiled languages like C know exactly what the flow of the program is because the code is pre-interpreted and ready to go before execution (i.e., the code is “compiled”).</p>
<p>For example, when you assign a new variable in R:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="m">1.0</span>
<span class="nf">class</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'numeric'</div></div>
</div>
<p>R automatically figures out that <code class="docutils literal notranslate"><span class="pre">1.0</span></code> is an floating point number (you don’t have to tell the computer to do that manually), and find a place in the system memory for it with registered as <code class="docutils literal notranslate"><span class="pre">a</span></code> “pointer” to it.</p>
<p>In contrast, in C, for example, you would do:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p><em>Vectorization is an approach where you directly apply compiled, optimized code to run an operation on a vector, matrix, or an higher-dimensional data structure (like an R array), instead of performing the operation element-wise on the data structure</em>.</p>
<p>Let’s try an example that illustrates this point.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type (save in <code class="docutils literal notranslate"><span class="pre">Code</span></code>) as <code class="docutils literal notranslate"><span class="pre">Vectorize1.R</span></code> the following script, and run it (it sums all elements of a matrix):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">M</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="nf">runif</span><span class="p">(</span><span class="m">1000000</span><span class="p">),</span><span class="m">1000</span><span class="p">,</span><span class="m">1000</span><span class="p">)</span>

<span class="n">SumAllElements</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">M</span><span class="p">){</span>
  <span class="n">Dimensions</span> <span class="o">&lt;-</span> <span class="nf">dim</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
  <span class="n">Tot</span> <span class="o">&lt;-</span> <span class="m">0</span>
  <span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="n">Dimensions</span><span class="p">[</span><span class="m">1</span><span class="p">]){</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">j</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="n">Dimensions</span><span class="p">[</span><span class="m">2</span><span class="p">]){</span>
      <span class="n">Tot</span> <span class="o">&lt;-</span> <span class="n">Tot</span> <span class="o">+</span> <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nf">return </span><span class="p">(</span><span class="n">Tot</span><span class="p">)</span>
<span class="p">}</span>
 
<span class="nf">print</span><span class="p">(</span><span class="s">&quot;Using loops, the time taken is:&quot;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">SumAllElements</span><span class="p">(</span><span class="n">M</span><span class="p">)))</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;Using the in-built vectorized function, the time taken is:&quot;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">M</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Using loops, the time taken is:&quot;
   user  system elapsed 
  0.092   0.000   0.092 
[1] &quot;Using the in-built vectorized function, the time taken is:&quot;
   user  system elapsed 
  0.004   0.000   0.001 
</pre></div>
</div>
</div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">system.time</span></code> R function: it calculates how much time your code takes. This time will vary with every run, and every computer that this code is run on (so your times will be a bit different than what I got).</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">SumAllElements()</span></code> and <code class="docutils literal notranslate"><span class="pre">sum()</span></code> approaches are correct, and will give you the right answer. However, the inbuilt function <code class="docutils literal notranslate"><span class="pre">sum()</span></code>  is about 100 times faster than the other, because it uses vectorization, avoiding the amount of looping that <code class="docutils literal notranslate"><span class="pre">SumAllElements()</span></code> uses.</p>
<p>In effect, of course, the computer still has to run loops. However, this running of the loops is encapsulated in a pre-complied program that R calls. These programs are written in more primitive (and therefore, faster) languages like Fortran and C. For example <code class="docutils literal notranslate"><span class="pre">sum</span></code> is actually written in C if you look under the hood.</p>
<p>In R, even if you should try to avoid loops, in practice, it is often much easier to throw in a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, and <em>then</em> “optimize” the code to avoid the loop if the running time is not satisfactory. Therefore, it won’t hurt you to become really familiar with loops and looping as you learned in the sections above.</p>
<div class="section" id="pre-allocation">
<h3>Pre-allocation<a class="headerlink" href="#pre-allocation" title="Permalink to this headline">¶</a></h3>
<p>And if you are using loops, one operation that is slow in R (and somewhat slow in all languages) is memory allocation for a particular variable that will change during loping (e.g., a variable that is a dataframe). So writing a for loop that resizes a vector repeatedly makes R re-allocate memory repeatedly, which makes it slow. Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
<span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">a</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">object.size</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] NA  1
48 bytes
[1] NA  1  2
56 bytes
[1] NA  1  2  3
56 bytes
[1] NA  1  2  3  4
72 bytes
[1] NA  1  2  3  4  5
72 bytes
[1] NA  1  2  3  4  5  6
72 bytes
[1] NA  1  2  3  4  5  6  7
72 bytes
[1] NA  1  2  3  4  5  6  7  8
88 bytes
 [1] NA  1  2  3  4  5  6  7  8  9
88 bytes
 [1] NA  1  2  3  4  5  6  7  8  9 10
88 bytes
</pre></div>
</div>
</div>
</div>
<p>Here, in each repetition of the for loop, R has to re-size the vector and re-allocate memory. It has to find the vector in memory, create a new vector that will fit more data, copy the old data over, insert the new data, and erase the old vector. This can get very slow as vectors get big.</p>
<p>On the other hand, if you “pre-allocate” a vector that fits all the values, R doesn’t have to re-allocate memory each iteration, and the results can be much faster. Here’s how you’d do that for the above case:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">&lt;-</span> <span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>

<span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">i</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">object.size</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [1]  1 NA NA NA NA NA NA NA NA NA
88 bytes
 [1]  1  2 NA NA NA NA NA NA NA NA
88 bytes
 [1]  1  2  3 NA NA NA NA NA NA NA
88 bytes
 [1]  1  2  3  4 NA NA NA NA NA NA
88 bytes
 [1]  1  2  3  4  5 NA NA NA NA NA
88 bytes
 [1]  1  2  3  4  5  6 NA NA NA NA
88 bytes
 [1]  1  2  3  4  5  6  7 NA NA NA
88 bytes
 [1]  1  2  3  4  5  6  7  8 NA NA
88 bytes
 [1]  1  2  3  4  5  6  7  8  9 NA
88 bytes
 [1]  1  2  3  4  5  6  7  8  9 10
88 bytes
</pre></div>
</div>
</div>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Write the above two blocks of code into a script called <code class="docutils literal notranslate"><span class="pre">preallocate.R</span></code>.</p>
<p><em>Try timing each of these as you did above using <code class="docutils literal notranslate"><span class="pre">system.time()</span></code></em>. To really see the difference, increase the iterations from 10 to, say, 10000.</p>
<p>Fortunately, R has several functions that can operate on entire vectors and matrices without requiring looping (Vectorization). That is, vectorizing a computer program means you write it such that as many operations as possible are applied to whole data structure (vectors, matrices, dataframes, lists, etc) at one go, instead of its individual elements.</p>
<p>You will learn about some important R functions that allow vectorization in the following sections.</p>
</div>
<div class="section" id="the-apply-family-of-functions">
<h3>The <code class="docutils literal notranslate"> <span class="pre">*apply</span></code> family of functions<a class="headerlink" href="#the-apply-family-of-functions" title="Permalink to this headline">¶</a></h3>
<p>There are a family of functions called <code class="docutils literal notranslate"> <span class="pre">*apply</span></code> in R that vectorize your code for you. These functions are described in the help files (e.g. <code class="docutils literal notranslate"><span class="pre">?apply</span></code>).</p>
<p>For example, <code class="docutils literal notranslate"> <span class="pre">apply</span></code> can be used when you want to apply a function to the rows or columns of a matrix (and higher-dimensional analogues – remember arrays!). This is not generally advisable for data frames as it will first need to coerce the data frame to a matrix first.</p>
<p>Let us try using applying the same function to rows/colums of a matrix using <code class="docutils literal notranslate"><span class="pre">apply</span></code>.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the following in a script file called <code class="docutils literal notranslate"><span class="pre">apply1.R</span></code>, save it to your <code class="docutils literal notranslate"> <span class="pre">Code</span></code> directory, and run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## Build a random matrix</span>
<span class="n">M</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="nf">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span> <span class="m">10</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>

<span class="c1">## Take the mean of each row</span>
<span class="n">RowMeans</span> <span class="o">&lt;-</span> <span class="nf">apply</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">RowMeans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [1]  0.13887430  0.13423750 -0.15438562  0.13299419  0.21009587  0.10900181
 [7]  0.02046832  0.25053768  0.12152921 -0.03759994
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## Now the variance</span>
<span class="n">RowVars</span> <span class="o">&lt;-</span> <span class="nf">apply</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">RowVars</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [1] 0.9865318 1.5838177 1.2264218 0.5343393 0.2859198 0.4061937 0.5151787
 [8] 0.6175041 0.9454242 1.1781409
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## By column</span>
<span class="n">ColMeans</span> <span class="o">&lt;-</span> <span class="nf">apply</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">ColMeans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> [1]  0.08003926 -0.09029519  0.31088408 -0.01183952  0.66517104 -0.23439540
 [7]  0.37925129 -0.09717995  0.12783125 -0.20371354
</pre></div>
</div>
</div>
</div>
<p>That was using <code class="docutils literal notranslate"><span class="pre">apply</span></code> on some of R’s inbuilt functions. You can use apply to define your own functions. Let’s try it.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the following in a script file called <code class="docutils literal notranslate"><span class="pre">apply2.R</span></code>, save it to your <code class="docutils literal notranslate"> <span class="pre">Code</span></code> directory, and run it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">SomeOperation</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">v</span><span class="p">){</span> <span class="c1"># (What does this function do?)</span>
  <span class="nf">if </span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">){</span> <span class="c1">#note that sum(v) is a single (scalar) value</span>
    <span class="nf">return </span><span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="m">100</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nf">return </span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">M</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="nf">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span> <span class="m">10</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="nf">apply</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">SomeOperation</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>            [,1]       [,2]       [,3]        [,4]       [,5]        [,6]
 [1,]  218.96123  0.3739287  0.1345866   2.9959679 -0.2278927  -51.395152
 [2,]  -24.35761 -1.1442772  0.2806305  -0.5174755 -0.3090503   14.825598
 [3,]   60.35741  0.8410744  0.4363130  -3.3051809  0.9968347  -10.028331
 [4,]   61.96397  1.0853180  0.3034601 -12.3861929 -0.6107510  121.917833
 [5,]  196.84741 -0.4385735  0.5410925  25.5253939 -1.8514717 -269.071909
 [6,]   80.68263 -1.1685844 -0.3247987 115.1006251  0.2672675  -88.921280
 [7,]  -84.03487  1.3194126 -1.0330860 -46.2602466 -1.5212182   -2.082895
 [8,]  105.01426  0.9716574 -1.2134476 -45.3200337  0.5832720  153.259972
 [9,]  -21.44654 -1.6641270  1.4532872  -5.0270535 -0.5787721   85.889045
[10,] -204.93621 -1.2989395 -0.6343706  18.3290068  0.8546259   60.274796
             [,7]        [,8]        [,9]       [,10]
 [1,]  0.71192311 -0.56820250  146.047500  254.833418
 [2,] -1.19024684  0.36825372 -109.812153   61.166797
 [3,]  2.30628103 -0.44200817   -1.116764   60.841708
 [4,] -0.09812756  0.22227763  -19.557943 -108.679788
 [5,] -2.07635476  0.50242975   59.807544    1.708412
 [6,] -0.55074348  0.05542099  -13.350871  107.215607
 [7,]  0.58668300  0.17614449    5.382612  -29.938768
 [8,] -0.60240408  0.26254910  153.411662  -35.923656
 [9,] -0.76604807  0.37385337  -27.159056 -107.858753
[10,] -1.16662232 -1.30617388  -70.980268  -34.738217
</pre></div>
</div>
</div>
</div>
<p>Thus, the function <code class="docutils literal notranslate"><span class="pre">SomeOperation</span></code> takes as input <code class="docutils literal notranslate"><span class="pre">v</span></code>. Then if the sum of v is greater than zero, it multiplies that value by 100. So if v has positive and negative numbers, and the sum comes out to be positive, only then does it multiply all the values in v by 100 and return them.</p>
<p>There are many other methods: <code class="docutils literal notranslate"> <span class="pre">lapply</span></code>, <code class="docutils literal notranslate"> <span class="pre">sapply</span></code>, <code class="docutils literal notranslate"> <span class="pre">eapply</span></code>, etc. Each is best for a given data type. For example, <code class="docutils literal notranslate"> <span class="pre">lapply</span></code> is designed for R lists. Have a look at <a class="reference external" href="https://stackoverflow.com/questions/3505701/grouping-functions-tapply-by-aggregate-and-the-apply-family">this Stackoveflow thread</a>
for some guidelines.</p>
<div class="section" id="a-vectorization-example">
<h4>A vectorization example<a class="headerlink" href="#a-vectorization-example" title="Permalink to this headline">¶</a></h4>
<p>Let’s try an example of vectorization involving <code class="docutils literal notranslate"><span class="pre">lapply</span></code> and <code class="docutils literal notranslate"><span class="pre">sapply</span></code>. We will also learn how sampling random numbers works.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the following blocks of code into a single script called <code class="docutils literal notranslate"><span class="pre">sample.R</span></code> and save in <code class="docutils literal notranslate"><span class="pre">code</span></code>.</p>
<p>First some functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">######### Functions ##########</span>

<span class="c1">## A function to take a sample of size n from a population &quot;popn&quot; and return its mean</span>
<span class="n">myexperiment</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span><span class="n">n</span><span class="p">){</span>
    <span class="n">pop_sample</span> <span class="o">&lt;-</span> <span class="nf">sample</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
    <span class="nf">return</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">pop_sample</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">## Calculate means using a for loop without preallocation:</span>
<span class="n">loopy_sample1</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">){</span>
	<span class="n">result1</span> <span class="o">&lt;-</span> <span class="nf">vector</span><span class="p">()</span> <span class="c1">#Initialize empty vector of size 1 </span>
	<span class="nf">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="n">num</span><span class="p">){</span>
		<span class="n">result1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="n">result1</span><span class="p">,</span> <span class="nf">myexperiment</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
    <span class="p">}</span>
	<span class="nf">return</span><span class="p">(</span><span class="n">result1</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">## To run &quot;num&quot; iterations of the experiment using a for loop on a vector with preallocation:</span>
<span class="n">loopy_sample2</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">){</span>
	<span class="n">result2</span> <span class="o">&lt;-</span> <span class="nf">vector</span><span class="p">(,</span><span class="n">num</span><span class="p">)</span> <span class="c1">#Preallocate expected size</span>
	<span class="nf">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="n">num</span><span class="p">){</span>
		<span class="n">result2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="nf">myexperiment</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">}</span>
	<span class="nf">return</span><span class="p">(</span><span class="n">result2</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">## To run &quot;num&quot; iterations of the experiment using a for loop on a list with preallocation:</span>
<span class="n">loopy_sample3</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">){</span>
	<span class="n">result3</span> <span class="o">&lt;-</span> <span class="nf">vector</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="c1">#Preallocate expected size</span>
	<span class="nf">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="n">num</span><span class="p">){</span>
		<span class="n">result3</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;-</span> <span class="nf">myexperiment</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">}</span>
	<span class="nf">return</span><span class="p">(</span><span class="n">result3</span><span class="p">)</span>
<span class="p">}</span>


<span class="c1">## To run &quot;num&quot; iterations of the experiment using vectorization with lapply:</span>
<span class="n">lapply_sample</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">){</span>
	<span class="n">result4</span> <span class="o">&lt;-</span> <span class="nf">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">num</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="nf">myexperiment</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
	<span class="nf">return</span><span class="p">(</span><span class="n">result4</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">## To run &quot;num&quot; iterations of the experiment using vectorization with lapply:</span>
<span class="n">sapply_sample</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">){</span>
	<span class="n">result5</span> <span class="o">&lt;-</span> <span class="nf">sapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">num</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="nf">myexperiment</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
	<span class="nf">return</span><span class="p">(</span><span class="n">result5</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><em>Think about what each of these functions does</em></p>
<p>Now generate a population:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">popn</span> <span class="o">&lt;-</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span> <span class="c1"># Generate the population</span>
<span class="nf">hist</span><span class="p">(</span><span class="n">popn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/07-R_257_0.png" src="../_images/07-R_257_0.png" />
</div>
</div>
<p>Now run and time the different functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">&lt;-</span> <span class="m">20</span> <span class="c1"># sample size for each experiment</span>
<span class="n">num</span> <span class="o">&lt;-</span> <span class="m">1000</span> <span class="c1"># Number of times to rerun the experiment</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;The loopy, non-preallocation approach takes:&quot;</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">loopy_sample1</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">)))</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;The loopy, but with preallocation approach takes:&quot;</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">loopy_sample2</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">)))</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;The loopy, non-preallocation approach on a list takes:&quot;</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">loopy_sample3</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">)))</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;The vectorized sapply approach takes:&quot;</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">sapply_sample</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">)))</span>

<span class="nf">print</span><span class="p">(</span><span class="s">&quot;The vectorized lapply approach takes:&quot;</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">system.time</span><span class="p">(</span><span class="nf">lapply_sample</span><span class="p">(</span><span class="n">popn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">num</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;The loopy, non-preallocation approach takes:&quot;
   user  system elapsed 
  0.012   0.000   0.013 
[1] &quot;The loopy, but with preallocation approach takes:&quot;
   user  system elapsed 
  0.012   0.000   0.013 
[1] &quot;The loopy, non-preallocation approach on a list takes:&quot;
   user  system elapsed 
  0.016   0.000   0.017 
[1] &quot;The vectorized sapply approach takes:&quot;
   user  system elapsed 
  0.012   0.000   0.012 
[1] &quot;The vectorized lapply approach takes:&quot;
   user  system elapsed 
  0.020   0.000   0.018 
</pre></div>
</div>
</div>
</div>
<p><span class="math notranslate nohighlight">\(\star\)</span> Run<code class="docutils literal notranslate"><span class="pre">sample.R</span></code> using <code class="docutils literal notranslate"><span class="pre">source</span></code> and/or <code class="docutils literal notranslate"><span class="pre">Rscript</span></code> and make sure it works.</p>
</div>
<div class="section" id="the-tapply-function">
<h4>The <code class="docutils literal notranslate"><span class="pre">tapply</span></code> function<a class="headerlink" href="#the-tapply-function" title="Permalink to this headline">¶</a></h4>
<p>Let’s look at <code class="docutils literal notranslate"><span class="pre">tapply</span></code>, which is particularly useful because it allows you to apply a function to subsets of a vector in a dataframe, with the subsets defined by some other vector in the same dataframe, usually a factor (this could be useful for pound hill data analysis that’s coming up, for example).</p>
<p>This makes it a bit of a different member of the <code class="docutils literal notranslate"> <span class="pre">*apply</span></code> family. Try this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">20</span> <span class="c1"># a vector</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>1</li>
	<li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
	<li>6</li>
	<li>7</li>
	<li>8</li>
	<li>9</li>
	<li>10</li>
	<li>11</li>
	<li>12</li>
	<li>13</li>
	<li>14</li>
	<li>15</li>
	<li>16</li>
	<li>17</li>
	<li>18</li>
	<li>19</li>
	<li>20</li>
</ol>
</div></div>
</div>
<p>Now create a <code class="docutils literal notranslate"><span class="pre">factor</span></code> type variable (of the same length) defining groups:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">&lt;-</span> <span class="nf">factor</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="kc">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span> <span class="n">each</span> <span class="o">=</span> <span class="m">4</span><span class="p">))</span> 
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol class=list-inline>
	<li>a</li>
	<li>a</li>
	<li>a</li>
	<li>a</li>
	<li>b</li>
	<li>b</li>
	<li>b</li>
	<li>b</li>
	<li>c</li>
	<li>c</li>
	<li>c</li>
	<li>c</li>
	<li>d</li>
	<li>d</li>
	<li>d</li>
	<li>d</li>
	<li>e</li>
	<li>e</li>
	<li>e</li>
	<li>e</li>
</ol>
</div></div>
</div>
<p>Now add up the values in x within each subgroup defined by y:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">tapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><dl class=dl-horizontal>
	<dt>a</dt>
		<dd>10</dd>
	<dt>b</dt>
		<dd>26</dd>
	<dt>c</dt>
		<dd>42</dd>
	<dt>d</dt>
		<dd>58</dd>
	<dt>e</dt>
		<dd>74</dd>
</dl>
</div></div>
</div>
</div>
</div>
<div class="section" id="using-by">
<h3>Using <code class="docutils literal notranslate"> <span class="pre">by</span></code><a class="headerlink" href="#using-by" title="Permalink to this headline">¶</a></h3>
<p>You can also do something similar to <code class="docutils literal notranslate"><span class="pre">tapply</span></code> with the <code class="docutils literal notranslate"><span class="pre">by</span></code> function, i.e., apply a function to a dataframe using some factor to define the subsets. Try this:</p>
<p>First import some data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">attach</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
<span class="n">iris</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<thead><tr><th scope=col>Sepal.Length</th><th scope=col>Sepal.Width</th><th scope=col>Petal.Length</th><th scope=col>Petal.Width</th><th scope=col>Species</th></tr></thead>
<tbody>
	<tr><td>5.1   </td><td>3.5   </td><td>1.4   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.9   </td><td>3.0   </td><td>1.4   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.7   </td><td>3.2   </td><td>1.3   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.6   </td><td>3.1   </td><td>1.5   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.0   </td><td>3.6   </td><td>1.4   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.4   </td><td>3.9   </td><td>1.7   </td><td>0.4   </td><td>setosa</td></tr>
	<tr><td>4.6   </td><td>3.4   </td><td>1.4   </td><td>0.3   </td><td>setosa</td></tr>
	<tr><td>5.0   </td><td>3.4   </td><td>1.5   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.4   </td><td>2.9   </td><td>1.4   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.9   </td><td>3.1   </td><td>1.5   </td><td>0.1   </td><td>setosa</td></tr>
	<tr><td>5.4   </td><td>3.7   </td><td>1.5   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.8   </td><td>3.4   </td><td>1.6   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.8   </td><td>3.0   </td><td>1.4   </td><td>0.1   </td><td>setosa</td></tr>
	<tr><td>4.3   </td><td>3.0   </td><td>1.1   </td><td>0.1   </td><td>setosa</td></tr>
	<tr><td>5.8   </td><td>4.0   </td><td>1.2   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.7   </td><td>4.4   </td><td>1.5   </td><td>0.4   </td><td>setosa</td></tr>
	<tr><td>5.4   </td><td>3.9   </td><td>1.3   </td><td>0.4   </td><td>setosa</td></tr>
	<tr><td>5.1   </td><td>3.5   </td><td>1.4   </td><td>0.3   </td><td>setosa</td></tr>
	<tr><td>5.7   </td><td>3.8   </td><td>1.7   </td><td>0.3   </td><td>setosa</td></tr>
	<tr><td>5.1   </td><td>3.8   </td><td>1.5   </td><td>0.3   </td><td>setosa</td></tr>
	<tr><td>5.4   </td><td>3.4   </td><td>1.7   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.1   </td><td>3.7   </td><td>1.5   </td><td>0.4   </td><td>setosa</td></tr>
	<tr><td>4.6   </td><td>3.6   </td><td>1.0   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.1   </td><td>3.3   </td><td>1.7   </td><td>0.5   </td><td>setosa</td></tr>
	<tr><td>4.8   </td><td>3.4   </td><td>1.9   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.0   </td><td>3.0   </td><td>1.6   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.0   </td><td>3.4   </td><td>1.6   </td><td>0.4   </td><td>setosa</td></tr>
	<tr><td>5.2   </td><td>3.5   </td><td>1.5   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>5.2   </td><td>3.4   </td><td>1.4   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>4.7   </td><td>3.2   </td><td>1.6   </td><td>0.2   </td><td>setosa</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>6.9      </td><td>3.2      </td><td>5.7      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>5.6      </td><td>2.8      </td><td>4.9      </td><td>2.0      </td><td>virginica</td></tr>
	<tr><td>7.7      </td><td>2.8      </td><td>6.7      </td><td>2.0      </td><td>virginica</td></tr>
	<tr><td>6.3      </td><td>2.7      </td><td>4.9      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.7      </td><td>3.3      </td><td>5.7      </td><td>2.1      </td><td>virginica</td></tr>
	<tr><td>7.2      </td><td>3.2      </td><td>6.0      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.2      </td><td>2.8      </td><td>4.8      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.1      </td><td>3.0      </td><td>4.9      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.4      </td><td>2.8      </td><td>5.6      </td><td>2.1      </td><td>virginica</td></tr>
	<tr><td>7.2      </td><td>3.0      </td><td>5.8      </td><td>1.6      </td><td>virginica</td></tr>
	<tr><td>7.4      </td><td>2.8      </td><td>6.1      </td><td>1.9      </td><td>virginica</td></tr>
	<tr><td>7.9      </td><td>3.8      </td><td>6.4      </td><td>2.0      </td><td>virginica</td></tr>
	<tr><td>6.4      </td><td>2.8      </td><td>5.6      </td><td>2.2      </td><td>virginica</td></tr>
	<tr><td>6.3      </td><td>2.8      </td><td>5.1      </td><td>1.5      </td><td>virginica</td></tr>
	<tr><td>6.1      </td><td>2.6      </td><td>5.6      </td><td>1.4      </td><td>virginica</td></tr>
	<tr><td>7.7      </td><td>3.0      </td><td>6.1      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>6.3      </td><td>3.4      </td><td>5.6      </td><td>2.4      </td><td>virginica</td></tr>
	<tr><td>6.4      </td><td>3.1      </td><td>5.5      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.0      </td><td>3.0      </td><td>4.8      </td><td>1.8      </td><td>virginica</td></tr>
	<tr><td>6.9      </td><td>3.1      </td><td>5.4      </td><td>2.1      </td><td>virginica</td></tr>
	<tr><td>6.7      </td><td>3.1      </td><td>5.6      </td><td>2.4      </td><td>virginica</td></tr>
	<tr><td>6.9      </td><td>3.1      </td><td>5.1      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>5.8      </td><td>2.7      </td><td>5.1      </td><td>1.9      </td><td>virginica</td></tr>
	<tr><td>6.8      </td><td>3.2      </td><td>5.9      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>6.7      </td><td>3.3      </td><td>5.7      </td><td>2.5      </td><td>virginica</td></tr>
	<tr><td>6.7      </td><td>3.0      </td><td>5.2      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>6.3      </td><td>2.5      </td><td>5.0      </td><td>1.9      </td><td>virginica</td></tr>
	<tr><td>6.5      </td><td>3.0      </td><td>5.2      </td><td>2.0      </td><td>virginica</td></tr>
	<tr><td>6.2      </td><td>3.4      </td><td>5.4      </td><td>2.3      </td><td>virginica</td></tr>
	<tr><td>5.9      </td><td>3.0      </td><td>5.1      </td><td>1.8      </td><td>virginica</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Now run the <code class="docutils literal notranslate"><span class="pre">colMeans</span></code> function (it is better for dataframes than just mean) on multiple columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">by</span><span class="p">(</span><span class="n">iris</span><span class="p">[,</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">],</span> <span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="p">,</span> <span class="n">colMeans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>iris$Species: setosa
Sepal.Length  Sepal.Width 
       5.006        3.428 
------------------------------------------------------------ 
iris$Species: versicolor
Sepal.Length  Sepal.Width 
       5.936        2.770 
------------------------------------------------------------ 
iris$Species: virginica
Sepal.Length  Sepal.Width 
       6.588        2.974 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">by</span><span class="p">(</span><span class="n">iris</span><span class="p">[,</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">],</span> <span class="n">iris</span><span class="o">$</span><span class="n">Petal.Width</span><span class="p">,</span> <span class="n">colMeans</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>iris$Petal.Width: 0.1
Sepal.Length  Sepal.Width 
        4.82         3.36 
------------------------------------------------------------ 
iris$Petal.Width: 0.2
Sepal.Length  Sepal.Width 
    4.972414     3.379310 
------------------------------------------------------------ 
iris$Petal.Width: 0.3
Sepal.Length  Sepal.Width 
    4.971429     3.328571 
------------------------------------------------------------ 
iris$Petal.Width: 0.4
Sepal.Length  Sepal.Width 
    5.300000     3.785714 
------------------------------------------------------------ 
iris$Petal.Width: 0.5
Sepal.Length  Sepal.Width 
         5.1          3.3 
------------------------------------------------------------ 
iris$Petal.Width: 0.6
Sepal.Length  Sepal.Width 
         5.0          3.5 
------------------------------------------------------------ 
iris$Petal.Width: 1
Sepal.Length  Sepal.Width 
    5.414286     2.371429 
------------------------------------------------------------ 
iris$Petal.Width: 1.1
Sepal.Length  Sepal.Width 
    5.400000     2.466667 
------------------------------------------------------------ 
iris$Petal.Width: 1.2
Sepal.Length  Sepal.Width 
        5.78         2.74 
------------------------------------------------------------ 
iris$Petal.Width: 1.3
Sepal.Length  Sepal.Width 
    5.884615     2.746154 
------------------------------------------------------------ 
iris$Petal.Width: 1.4
Sepal.Length  Sepal.Width 
      6.3250       2.9125 
------------------------------------------------------------ 
iris$Petal.Width: 1.5
Sepal.Length  Sepal.Width 
    6.183333     2.816667 
------------------------------------------------------------ 
iris$Petal.Width: 1.6
Sepal.Length  Sepal.Width 
       6.375        3.100 
------------------------------------------------------------ 
iris$Petal.Width: 1.7
Sepal.Length  Sepal.Width 
        5.80         2.75 
------------------------------------------------------------ 
iris$Petal.Width: 1.8
Sepal.Length  Sepal.Width 
    6.400000     2.941667 
------------------------------------------------------------ 
iris$Petal.Width: 1.9
Sepal.Length  Sepal.Width 
        6.34         2.68 
------------------------------------------------------------ 
iris$Petal.Width: 2
Sepal.Length  Sepal.Width 
    6.650000     3.016667 
------------------------------------------------------------ 
iris$Petal.Width: 2.1
Sepal.Length  Sepal.Width 
    6.916667     3.033333 
------------------------------------------------------------ 
iris$Petal.Width: 2.2
Sepal.Length  Sepal.Width 
    6.866667     3.200000 
------------------------------------------------------------ 
iris$Petal.Width: 2.3
Sepal.Length  Sepal.Width 
      6.9125       3.0875 
------------------------------------------------------------ 
iris$Petal.Width: 2.4
Sepal.Length  Sepal.Width 
    6.266667     3.100000 
------------------------------------------------------------ 
iris$Petal.Width: 2.5
Sepal.Length  Sepal.Width 
    6.733333     3.400000 
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="using-replicate">
<h3>Using <code class="docutils literal notranslate"> <span class="pre">replicate</span></code><a class="headerlink" href="#using-replicate" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">replicate</span></code> function is useful to avoid a loop for function that typically involves random number generation (more on this below). For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">replicate</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="nf">runif</span><span class="p">(</span><span class="m">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
<tbody>
	<tr><td>0.91524985</td><td>0.8629459 </td><td>0.03768974</td><td>0.8791422 </td><td>0.9384136 </td><td>0.07098006</td><td>0.07248823</td><td>0.6603725 </td><td>0.7249495 </td><td>0.08724721</td></tr>
	<tr><td>0.02969437</td><td>0.4966031 </td><td>0.51659297</td><td>0.4373408 </td><td>0.4262682 </td><td>0.29415173</td><td>0.99860761</td><td>0.5176856 </td><td>0.8261645 </td><td>0.27856532</td></tr>
	<tr><td>0.76750970</td><td>0.8535040 </td><td>0.81845788</td><td>0.7262712 </td><td>0.3526356 </td><td>0.80281559</td><td>0.54655430</td><td>0.8395097 </td><td>0.1604855 </td><td>0.20356123</td></tr>
	<tr><td>0.48005398</td><td>0.6258879 </td><td>0.49512495</td><td>0.8647686 </td><td>0.4203467 </td><td>0.70606392</td><td>0.19125633</td><td>0.2136249 </td><td>0.8785931 </td><td>0.44683033</td></tr>
	<tr><td>0.08837960</td><td>0.2414525 </td><td>0.17894205</td><td>0.2991073 </td><td>0.3090412 </td><td>0.97423383</td><td>0.44404534</td><td>0.3273725 </td><td>0.7703417 </td><td>0.96499355</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>That is, you just generated 10 sets (columns) of 5 uniformly-distributed random numbers (a 10 <span class="math notranslate nohighlight">\(\times\)</span> 5 matrix).</p>
</div>
<div class="section" id="using-plyr-and-ddply">
<h3>Using <code class="docutils literal notranslate"><span class="pre">plyr</span></code> and <code class="docutils literal notranslate"><span class="pre">ddply</span></code><a class="headerlink" href="#using-plyr-and-ddply" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">plyr</span></code> package combines the functionality of the <code class="docutils literal notranslate"><span class="pre">*apply</span></code> family, into a few handy functions. Look up the <a class="reference external" href="http://plyr.had.co.nz/">web page</a>.</p>
<p>In particular, <code class="docutils literal notranslate"> <span class="pre">ddply</span></code> is very useful, because for each subset of a data frame, it applies a function and then combines results into another data frame. In other words, “ddply” means: take a data frame, split it up, do something to it, and return a data frame. Look up <a class="reference external" href="http://seananderson.ca/2013/12/01/plyr.html">this</a> and
<a class="reference external" href="https://www.r-bloggers.com/transforming-subsets-of-data-in-r-with-by-ddply-and-data-table/">this</a>
for examples.	There you will also see a comparison of speed of <code class="docutils literal notranslate"><span class="pre">ddply</span></code> vs <code class="docutils literal notranslate"><span class="pre">by</span></code> at the latter web page; <code class="docutils literal notranslate"><span class="pre">ddply</span></code> is actually slower than other vectorized methods, as it trades-off compactness of use for some of the speed of vectorization! Indeed, overall functions in <code class="docutils literal notranslate"> <span class="pre">plyr</span></code> can be slow if you are working with very large datasets that involve a lot of subsetting (analyses by many groups or grouping variables).</p>
<p>The base <code class="docutils literal notranslate"> <span class="pre">*apply</span></code> functions remain useful and worth knowing even if you do get into <code class="docutils literal notranslate"> <span class="pre">plyr</span></code> or better still, <code class="docutils literal notranslate"> <span class="pre">dplyr</span></code>, which we will see in the <a class="reference internal" href="08-Data_R.html"><span class="doc std std-doc">Data chapter</span></a>.</p>
</div>
</div>
<div class="section" id="id1">
<h2>Practicals<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><strong>A vectorization challenge</strong>:
The Ricker model is a classic discrete population model which was introduced in 1954 by Ricker to model recruitment of stock in fisheries. It gives the expected number (or density) <span class="math notranslate nohighlight">\(N_{t+1}\)</span> of individuals in generation <span class="math notranslate nohighlight">\(t + 1\)</span> as a function of the number of individuals in the previous generation <span class="math notranslate nohighlight">\(t\)</span>:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ N_{t+1}= N_t e^{r\left(1-\frac{N_t}{k}\right)} \]</div>
<p>Here <span class="math notranslate nohighlight">\(r\)</span> is intrinsic growth rate and <span class="math notranslate nohighlight">\(k\)</span> as the carrying capacity of the environment. Try this script (call it <code class="docutils literal notranslate"><span class="pre">Ricker.R</span></code> and save it to <code class="docutils literal notranslate"><span class="pre">code</span></code>) that runs it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">Ricker</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">N0</span><span class="o">=</span><span class="m">1</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="m">1</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="m">10</span><span class="p">,</span> <span class="n">generations</span><span class="o">=</span><span class="m">50</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1"># Runs a simulation of the Ricker model</span>
  <span class="c1"># Returns a vector of length generations</span>
  
  <span class="n">N</span> <span class="o">&lt;-</span> <span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span> <span class="n">generations</span><span class="p">)</span>    <span class="c1"># Creates a vector of NA</span>
  
  <span class="n">N</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">N0</span>
  <span class="nf">for </span><span class="p">(</span><span class="n">t</span> <span class="n">in</span> <span class="m">2</span><span class="o">:</span><span class="n">generations</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">N</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">N</span><span class="p">[</span><span class="n">t</span><span class="m">-1</span><span class="p">]</span> <span class="o">*</span> <span class="nf">exp</span><span class="p">(</span><span class="n">r</span><span class="o">*</span><span class="p">(</span><span class="m">1.0</span><span class="o">-</span><span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="n">t</span><span class="m">-1</span><span class="p">]</span><span class="o">/</span><span class="n">K</span><span class="p">)))</span>
  <span class="p">}</span>
  <span class="nf">return </span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">plot</span><span class="p">(</span><span class="nf">Ricker</span><span class="p">(</span><span class="n">generations</span><span class="o">=</span><span class="m">10</span><span class="p">),</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;l&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/07-R_276_0.png" src="../_images/07-R_276_0.png" />
</div>
</div>
<p>Now open and run the script <code class="docutils literal notranslate"><span class="pre">Vectorize2.R</span></code> (available on the TheMulQuaBio repository). This is the stochastic Ricker model (compare with the above script to see where the stochasticity (random error) enters). Now modify the script to complete the exercise given.
<em>Your goal is to come up with a solution better than mine!</em></p>
<ul class="simple">
<li><p><strong>Extra Credit:</strong> Implement the python versions of <code class="docutils literal notranslate"><span class="pre">Vectorize1.R</span></code>and <code class="docutils literal notranslate"> <span class="pre">Vectorize2.R</span></code> (call them <code class="docutils literal notranslate"><span class="pre">Vectorize1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">Vectorize2.py</span></code> respectively). Then write a bash script that compares the computational speed of the four scripts. the bash script should display meaningful summary of the results in the terminal.</p></li>
</ul>
</div>
<div class="section" id="errors-and-debugging">
<h2>Errors and Debugging<a class="headerlink" href="#errors-and-debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="catching-errors">
<h3>“Catching” errors<a class="headerlink" href="#catching-errors" title="Permalink to this headline">¶</a></h3>
<p>Often, you don’t know if a simulation or a R function will work on a particular data or variable, or a value of a variable (can happen in many stats functions).</p>
<p>Indeed, as most of you must have already experienced by now, there can be frustrating, puzzling bugs in programs that lead to mysterious errors. Often, the error and warning messages you get are un-understandable, especially in R!</p>
<p>Rather than having R throw you out of the code, you would rather catch the error and keep going. This can be done using <code class="docutils literal notranslate"> <span class="pre">try</span></code>. Lets try <code class="docutils literal notranslate"><span class="pre">try</span></code>. First, let’s write a function that runs a simulation that involves sampling from a synthetic population with replacement and takes its mean, but only if at least 30 unique samples are obtained.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">doit</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
	<span class="n">temp_x</span> <span class="o">&lt;-</span> <span class="nf">sample</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
	<span class="nf">if</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="nf">unique</span><span class="p">(</span><span class="n">temp_x</span><span class="p">))</span> <span class="o">&gt;</span> <span class="m">30</span><span class="p">)</span> <span class="p">{</span><span class="c1">#only take mean if sample was sufficient</span>
		 <span class="nf">print</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&quot;Mean of this sample was:&quot;</span><span class="p">,</span> <span class="nf">as.character</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">temp_x</span><span class="p">))))</span>
		<span class="p">}</span> 
	<span class="n">else</span> <span class="p">{</span>
		<span class="nf">stop</span><span class="p">(</span><span class="s">&quot;Couldn&#39;t calculate mean: too few unique values!&quot;</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">popn</span> <span class="o">&lt;-</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">50</span><span class="p">)</span> <span class="c1">#Generate your population</span>
</pre></div>
</div>
</div>
</div>
<p>Pay close attention to  the functions/commands <code class="docutils literal notranslate"><span class="pre">sample</span></code>, and <code class="docutils literal notranslate"><span class="pre">stop</span></code> in the above script (check out what they are by using R help or online).</p>
<p>Now try running it using <code class="docutils literal notranslate"><span class="pre">lapply</span></code> as you did <a class="reference external" href="#A-vectorization-example">above</a>, repeating the sampling exercise 15 times:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">15</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="nf">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Mean of this sample was: -0.0436363600026976&quot;
[1] &quot;Mean of this sample was: 0.153549825516567&quot;
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span> <span class="ow">in</span> <span class="n">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">):</span> <span class="n">Couldn</span><span class="s1">&#39;t calculate mean: too few unique values!</span>
<span class="ne">Traceback</span>:

<span class="mi">1</span><span class="o">.</span> <span class="n">lapply</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="n">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">))</span>
<span class="mi">2</span><span class="o">.</span> <span class="n">FUN</span><span class="p">(</span><span class="n">X</span><span class="p">[[</span><span class="n">i</span><span class="p">]],</span> <span class="o">...</span><span class="p">)</span>
<span class="mi">3</span><span class="o">.</span> <span class="n">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">)</span>   <span class="c1"># at line 1 of file &lt;text&gt;</span>
<span class="mi">4</span><span class="o">.</span> <span class="n">stop</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t calculate mean: too few unique values!&quot;</span><span class="p">)</span>   <span class="c1"># at line 7 of file &lt;text&gt;</span>
</pre></div>
</div>
</div>
</div>
<p>Your result will be different than this (you might get between 0 - 15 samples; here I got only two means). But in most cases, the script will fail because of the <code class="docutils literal notranslate"><span class="pre">stop</span></code> command (on line 8 of the function) at some iteration, returning less than the requested 15 mean values, followed by an error stating that the mean could not be calculated because too few unique values were sampled.</p>
<p>Now try doing the same using <code class="docutils literal notranslate"><span class="pre">try</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">&lt;-</span> <span class="nf">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">15</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="nf">try</span><span class="p">(</span><span class="nf">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">),</span> <span class="kc">FALSE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Mean of this sample was: -0.215760341430501&quot;
[1] &quot;Mean of this sample was: 0.0244506397411278&quot;
[1] &quot;Mean of this sample was: -0.0468663486706912&quot;
[1] &quot;Mean of this sample was: -0.089301171141933&quot;
[1] &quot;Mean of this sample was: 0.0275130219602047&quot;
[1] &quot;Mean of this sample was: 0.0980264939402886&quot;
[1] &quot;Mean of this sample was: 0.00224895672697098&quot;
[1] &quot;Mean of this sample was: 0.474615690961151&quot;
[1] &quot;Mean of this sample was: 0.150343985155713&quot;
</pre></div>
</div>
</div>
</div>
<p>In this run, you again asked for the means of 15 samples, and again you (most likely) got less than that (9 in the above example output), but without any error! The <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> modifier for the <code class="docutils literal notranslate"><span class="pre">try</span></code> command suppresses any error messages, but <code class="docutils literal notranslate"><span class="pre">result</span></code> will still contain them so that you can inspect them later (see below). <em>Please don’t forget to  check the help on inbuilt R commands like <code class="docutils literal notranslate"><span class="pre">try</span></code>.</em></p>
<p>The errors are stored in the object <code class="docutils literal notranslate"><span class="pre">result</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'list'</div></div>
</div>
<p>This is a list that stores the result of each of the 15 runs, including the ones that ran into an error. Have a look at it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">result</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1]]
[1] &quot;Mean of this sample was: -0.0626134323800103&quot;

[[2]]
[1] &quot;Mean of this sample was: 0.141592038273338&quot;

[[3]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;

[[4]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;

[[5]]
[1] &quot;Mean of this sample was: 0.193347290428195&quot;

[[6]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;

[[7]]
[1] &quot;Mean of this sample was: 0.108449651189628&quot;

[[8]]
[1] &quot;Mean of this sample was: -0.0645208526558483&quot;

[[9]]
[1] &quot;Mean of this sample was: 0.102197564974161&quot;

[[10]]
[1] &quot;Mean of this sample was: 0.0930743076955465&quot;

[[11]]
[1] &quot;Mean of this sample was: -0.0512480874860339&quot;

[[12]]
[1] &quot;Mean of this sample was: -0.0423857712591236&quot;

[[13]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;

[[14]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;

[[15]]
[1] &quot;Error in doit(popn) : Couldn&#39;t calculate mean: too few unique values!\n&quot;
attr(,&quot;class&quot;)
[1] &quot;try-error&quot;
attr(,&quot;condition&quot;)
&lt;simpleError in doit(popn): Couldn&#39;t calculate mean: too few unique values!&gt;
</pre></div>
</div>
</div>
</div>
<p>That’s a lot output! But basically it tells you which runs ran into and error and why (no surprises here, of course!). You can also store the results “manually” by using a loop to do the same:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">&lt;-</span> <span class="nf">vector</span><span class="p">(</span><span class="s">&quot;list&quot;</span><span class="p">,</span> <span class="m">15</span><span class="p">)</span> <span class="c1">#Preallocate/Initialize</span>
<span class="nf">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="m">1</span><span class="o">:</span><span class="m">15</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">result</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;-</span> <span class="nf">try</span><span class="p">(</span><span class="nf">doit</span><span class="p">(</span><span class="n">popn</span><span class="p">),</span> <span class="kc">FALSE</span><span class="p">)</span>
	<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;Mean of this sample was: 0.0124128789001811&quot;
[1] &quot;Mean of this sample was: 0.166903943403399&quot;
[1] &quot;Mean of this sample was: -0.0643309317021095&quot;
[1] &quot;Mean of this sample was: 0.135679158555082&quot;
[1] &quot;Mean of this sample was: 0.075244209895303&quot;
[1] &quot;Mean of this sample was: 0.0536254225839131&quot;
[1] &quot;Mean of this sample was: -0.00387520078585474&quot;
[1] &quot;Mean of this sample was: 0.106474217928657&quot;
[1] &quot;Mean of this sample was: -0.317879300279975&quot;
[1] &quot;Mean of this sample was: 0.109095413835189&quot;
[1] &quot;Mean of this sample was: 0.123860128716328&quot;
</pre></div>
</div>
</div>
</div>
<p>Now have a look at the new <code class="docutils literal notranslate"><span class="pre">result</span></code>; it will have similar content as the one you got from using <code class="docutils literal notranslate"><span class="pre">lapply</span></code>.</p>
<hr class="docutils" />
<blockquote>
<div><p>Also check out <code class="docutils literal notranslate"><span class="pre">tryCatch</span></code> as an alternative to <code class="docutils literal notranslate"><span class="pre">try</span></code>.</p>
</div></blockquote>
<hr class="docutils" />
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the above blocks of code illustrating <code class="docutils literal notranslate"><span class="pre">try</span></code> into a script file called <code class="docutils literal notranslate"><span class="pre">try.R</span></code> and save in <code class="docutils literal notranslate"><span class="pre">code</span></code>. The script, when <code class="docutils literal notranslate"><span class="pre">source</span></code>d, should run without errors (that is, don’t run the sampling function without <code class="docutils literal notranslate"><span class="pre">try</span></code>!).</p>
</div>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<p>Once you have found an error, you would like to fix it, or worse, there may be “silent” errors that pass without you noticing them. The solution is to debug your code. Here are some useful debugging functions in R :</p>
<ul class="simple">
<li><p>Warnings vs Errors; converting warnings to errors: <code class="docutils literal notranslate"><span class="pre">stopifnot()</span></code>—a bit like <code class="docutils literal notranslate"> <span class="pre">try</span></code></p></li>
<li><p>What to do when you get an error: <code class="docutils literal notranslate"><span class="pre">traceback()</span></code></p></li>
<li><p>Simple <code class="docutils literal notranslate"><span class="pre">print</span></code> commands in the right places can be useful for testing (but not strongly recommended)</p></li>
<li><p>Use of <code class="docutils literal notranslate"><span class="pre">browser()</span></code> at key points in code — my favourite option (also look up  <code class="docutils literal notranslate"><span class="pre">recover()</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug(fn)</span></code>, <code class="docutils literal notranslate"><span class="pre">undebug(fn)</span></code> : More technical approach to debugging — explore them</p></li>
</ul>
<p>Let’s look at an example using <code class="docutils literal notranslate"> <span class="pre">browser()</span></code>, which is particularly handy because it will allow you to insert a breakpoint in your script (where the running of the script is stopped) and then step through your code. Place it within your script at the point you want to examine local variables  (e.g. inside a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop).</p>
<p>Here’s an  example usage of <code class="docutils literal notranslate"><span class="pre">browser()</span></code>.</p>
<p><span class="math notranslate nohighlight">\(\star\)</span> Type the following in a script file called <code class="docutils literal notranslate"><span class="pre">browse.R</span></code> and save in <code class="docutils literal notranslate"><span class="pre">code</span></code>:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">Exponential</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">N0</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">generations</span> <span class="o">=</span> <span class="m">10</span><span class="p">){</span>
  <span class="c1"># Runs a simulation of exponential growth</span>
  <span class="c1"># Returns a vector of length generations</span>
  
  <span class="n">N</span> <span class="o">&lt;-</span> <span class="nf">rep</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span> <span class="n">generations</span><span class="p">)</span>    <span class="c1"># Creates a vector of NA</span>
  
  <span class="n">N</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">N0</span>
  <span class="nf">for </span><span class="p">(</span><span class="n">t</span> <span class="n">in</span> <span class="m">2</span><span class="o">:</span><span class="n">generations</span><span class="p">){</span>
    <span class="n">N</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="n">N</span><span class="p">[</span><span class="n">t</span><span class="m">-1</span><span class="p">]</span> <span class="o">*</span> <span class="nf">exp</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="nf">browser</span><span class="p">()</span>
  <span class="p">}</span>
  <span class="nf">return </span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">plot</span><span class="p">(</span><span class="nf">Exponential</span><span class="p">(),</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;l&quot;</span><span class="p">,</span> <span class="n">main</span><span class="o">=</span><span class="s">&quot;Exponential growth&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The script will be run till the first iteration of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop and the console will enter the browser mode, which looks like this:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">Browse</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Now, you can examine the variables present at that point. Also, at the browser console, you can enter expressions as normal, or use a few particularly useful debug commands (similar to the Python debugger):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>: single-step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: exit browser and continue</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Q</span></code>: exit browser and abort, return to top-level.</p></li>
</ul>
</div>
</div>
<div class="section" id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<p>The main strength of R is that users can easily build and share  packages through <a class="reference external" href="https://cran.r-project.org">cran.r-project.org</a>. There are packages to do most statistical and mathematical analysis you might conceive, so check them out before reinventing the wheel! Visit <a class="reference external" href="https://cran.r-project.org">cran.r-project.org</a> and go to packages to see a list and a brief description.</p>
<p>In UNIX, you can use the bash terminal to install R packages:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">r-cran-ggplot2</span> <span class="pre">r-cran-plyr</span> <span class="pre">r-cran-reshape2</span></code></p>
<p>In Windows and Macs and Linux, you can install a package within R by using the <code class="docutils literal notranslate"><span class="pre">install.packages()</span></code>command. Install the following packages:</p>
<p><code class="docutils literal notranslate"><span class="pre">install.packages(c(&quot;ggplot2&quot;,&quot;plyr&quot;,&quot;reshape2&quot;))</span></code></p>
<p>You can also use the RStudio GUI to install packages using your mouse and menu. In Linux, you will have to launch a <code class="docutils literal notranslate"> <span class="pre">sudo</span> <span class="pre">R</span></code>session to get <code class="docutils literal notranslate"><span class="pre">install.packages()</span></code>to work properly. Otherwise, you be forced to install the package in a non-standard location on your drive that does not require <code class="docutils literal notranslate"><span class="pre">sudo</span></code> privileges (nor recommended).</p>
<div class="section" id="building-your-own">
<h3>Building your own<a class="headerlink" href="#building-your-own" title="Permalink to this headline">¶</a></h3>
<p>You can combine your code, data sets and documentation to make a <em>bona fide</em> R package. You may wish to do this for particularly large projects that you think will be useful for others. Read the <a class="reference external" href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html"><em>Writing R Extensions</em></a> manual and see <em>package.skeleton</em> to get started.</p>
<p>The R tool set <a class="reference external" href="https://github.com/DomBennett/EcoDataTools">EcoDataTools</a> and the package <a class="reference external" href="https://github.com/quicklizard99/cheddar">cheddar</a> were written by Silwood Grad Students!</p>
</div>
</div>
<div class="section" id="sweave-and-knitr">
<h2>Sweave and knitr<a class="headerlink" href="#sweave-and-knitr" title="Permalink to this headline">¶</a></h2>
<p>Sweave and knitr are tools that allows you to write your Dissertation Report or some other document such that it can be updated automatically if data or R analysis change. Instead of inserting a prefabricated graph or table into the report, the master document contains the R code necessary to obtain it. When run through R, all data analysis output (tables, graphs, etc.) is created on the fly and inserted into a final document, which can be written using <span class="math notranslate nohighlight">\(\LaTeX\)</span>, LyX, HTML, or Markdown. The report can be automatically updated if data or analysis change, which allows for truly reproducible research.</p>
<p><a class="reference external" href="https://support.rstudio.com/hc/en-us/articles/200552056-Using-Sweave-and-knitr">Check this out</a> and <a class="reference external" href="http://yihui.name/knitr/">also this</a>.</p>
</div>
<div class="section" id="id2">
<h2>Practicals<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><strong>Autocorrelation in weather</strong> (this Practical assumes you know about correlation coefficients and p-values).
Your goal is to write an R script that will help answer the question: <em>Are temperatures of one year significantly correlated with the next year (successive years), across years in a given location</em>? For this, you need to calculate the correlation between <span class="math notranslate nohighlight">\(n-1\)</span> pairs of years, where <span class="math notranslate nohighlight">\(n\)</span> is the total number of years. However, you can’t use the standard p-value calculated for a correlation coefficient, because measurements of climatic variables in successive time-points in a time series (successive seconds, minutes, hours, months, years, etc.) are <em>not independent</em>. The general guidelines are:</p>
<ul class="simple">
<li><p>Make a new script named <code class="docutils literal notranslate"> <span class="pre">TAutoCorr.R</span></code>, and save in <code class="docutils literal notranslate"> <span class="pre">code</span></code>directory</p></li>
<li><p>At the start of the script, load and examine and plot <code class="docutils literal notranslate"><span class="pre">KeyWestAnnualMeanTemperature.Rdata</span></code>, using <code class="docutils literal notranslate"> <span class="pre">load()</span></code>. This is the temperature in Key West, Florida for the 20th century.</p></li>
<li><p>Now extend the script to:</p>
<ul>
<li><p>Compute the appropriate correlation coefficient between successive years and store it (look at the help file for <code class="docutils literal notranslate"><span class="pre">cor()</span></code></p></li>
<li><p>Repeat this calculation 10000 times by – randomly permuting the time series, and then recalculating the correlation coefficient for each randomly permuted year sequence and storing it.
<em>Hint</em>: you can use the <code class="docutils literal notranslate"><span class="pre">sample</span></code> function that we learned about). Read the help file for this function and experiment with it.</p></li>
<li><p>Then calculate what fraction of the correlation coefficients from the previous step were greater than that from step 1 (this is your approximate p-value).</p></li>
</ul>
</li>
<li><p><em>How do you interpret these results? Why?</em> Present your results and their interpretation in a pdf document written in <span class="math notranslate nohighlight">\(\LaTeX\)</span> (please include the the document’s source code as well).</p></li>
</ul>
</li>
<li><p>(<strong>Extra Credit</strong>) Make the <code class="docutils literal notranslate"><span class="pre">TreeHeight.R</span></code> script more general so that it could be used for other datasets, not just <code class="docutils literal notranslate"><span class="pre">trees.csv</span></code>:</p>
<ul class="simple">
<li><p>Write another R script called <code class="docutils literal notranslate"><span class="pre">get_TreeHeight.R</span></code> that takes a csv file name from the command line (e.g., <code class="docutils literal notranslate"><span class="pre">get_TreeHeight.R</span> <span class="pre">Trees.csv</span></code>) and outputs the result to a file just like <code class="docutils literal notranslate"> <span class="pre">TreeHeight.R</span></code>above, but this time includes the input file name in the output file name as <code class="docutils literal notranslate"> <span class="pre">InputFileName_treeheights.csv</span></code>. Note that you will have to strip the <code class="docutils literal notranslate"><span class="pre">.csv</span></code>or whatever the extension is from the filename, and also <code class="docutils literal notranslate"> <span class="pre">../</span></code>etc., if you are using relative paths. (Hint: Command-line parameters are accessible within the R running environment via <code class="docutils literal notranslate"><span class="pre">commandArgs()</span></code> — so <code class="docutils literal notranslate"><span class="pre">help(commandArgs)</span></code> might be your starting point.)</p></li>
<li><p>Write a Unix shell script called <code class="docutils literal notranslate"> <span class="pre">run_get_TreeHeight.sh</span></code> that tests <code class="docutils literal notranslate"> <span class="pre">get_TreeHeight.R</span></code>. Include <code class="docutils literal notranslate"><span class="pre">trees.csv</span></code>as your example file. Note that 	<code class="docutils literal notranslate"> <span class="pre">source</span></code>will not work in this case as it does not allow scripts with arguments to be run; you will have to use <code class="docutils literal notranslate"> <span class="pre">Rscript</span></code>instead.</p></li>
</ul>
</li>
<li><p><strong>Extra credit</strong>: If you have already started on <code class="docutils literal notranslate"><span class="pre">python</span></code> (Python Chapter I), write a python version of <code class="docutils literal notranslate"><span class="pre">get_TreeHeight.R</span></code> (call it <code class="docutils literal notranslate"> <span class="pre">get_TreeHeight.py</span></code>). Include a test of this script into <code class="docutils literal notranslate"> <span class="pre">run_get_TreeHeight.sh</span></code>.</p></li>
</ol>
<div class="section" id="practicals-wrap-up">
<h3>Practicals wrap-up<a class="headerlink" href="#practicals-wrap-up" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Review and make sure you can run all the commands, code fragments, and named scripts we have built till now and get the expected outputs.</p></li>
<li><p>Annotate/comment your code lines as much and as often as necessary using #.</p></li>
<li><p>Keep all files organized in <code class="docutils literal notranslate"> <span class="pre">code</span></code>, <code class="docutils literal notranslate"> <span class="pre">data</span></code>and <code class="docutils literal notranslate"><span class="pre">results</span></code> directories</p></li>
<li><p>(If you are required to as part of your course) <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">push</span></code> all your code and data from this chapter to your git repository by the given deadline.</p></li>
</ul>
</div>
</div>
<div class="section" id="readings-and-resources">
<h2>Readings and Resources<a class="headerlink" href="#readings-and-resources" title="Permalink to this headline">¶</a></h2>
<p>Learning to program in multiple language, especially if it’s your first-ever effort to learn programming, demands perseverance. If you have gotten so far in this course, you already have admirable quantities of this necessary quality. Keep going! I believe most if not all of you have climbed a significant part of a steep learning curve.</p>
<p>Check the readings under the R directory in the TheMulQuaBio repository. Also, google “R tutorial”, and plenty will pop up. Choose ones that seem the most intuitive to you.</p>
<ul class="simple">
<li><p>The Use R! series (all yellow books) by Springer are really good. In particular, consider: “A Beginner’s Guide to R”, “R by Example”, “Numerical Ecology With R”, “ggplot2” (coming up in the <a class="reference internal" href="08-Data_R.html"><span class="doc std std-doc">Visualization Chapter</span></a>, “A Primer of Ecology with R”, “Nonlinear Regression with R”, and “Analysis of Phylogenetics and Evolution with R”.</p></li>
<li><p>For more focus on dynamical models: Soetaert &amp; Herman. 2009 “A practical guide to ecological modelling: using R as a simulation platform”.</p></li>
<li><p>There are excellent websites besides cran. In particular, check out
<a class="reference external" href="https://www.statmethods.net/">statmethods.net</a> and the <a class="reference external" href="https://en.wikibooks.org/wiki/R_Programming">R Wiki</a>.</p></li>
<li><p>For those who are coming with Matlab experience, <a class="reference external" href="http://www.math.umaine.edu/~hiebeler/comp/matlabR.html">see this</a></p></li>
<li><p>Read this nice, <a class="reference external" href="http://www.noamross.net/blog/2014/4/16/vectorization-in-r--why.html">intuitive article about R and Vectorization</a>.</p></li>
<li><p>See <a class="reference external" href="http://www.biostat.jhsph.edu/~rpeng/docs/R-debug-tools.pdf">An introduction to the Interactive Debugging Tools in R</a> by Roger D Peng.</p></li>
<li><p>If you are sticking with RStudio, <a class="reference external" href="https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio">see this</a></p></li>
<li><p>For a practical intro to Sweave and knitr, see <a class="reference external" href="https://support.rstudio.com/hc/en-us/articles/200552056-Using-Sweave-and-knitr">this</a> and <a class="reference external" href="http://yihui.name/knitr/">this</a>.</p></li>
<li><p>There is a <a class="reference external" href="https://mailman.ic.ac.uk/mailman/listinfo/silwood-r">Silwood R list</a></p></li>
<li><p><em>Remember, R packages come with pdf guides/documentation!</em></p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            kernelName: "ir",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="06-Python_II.html" title="previous page">Biological Computing in Python II</a>
    <a class='right-next' id="next-link" href="11-Stats-Intro.html" title="next page">Introduction</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Samraat Pawar<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.30270b6e4c972e43c488.js"></script>


    
  </body>
</html>